{"ast":null,"code":"import { wait } from './wait.js';\n/**\n * @description Polls a function at a specified interval.\n */\nexport function poll(fn, {\n  emitOnBegin,\n  initialWaitTime,\n  interval\n}) {\n  let active = true;\n  const unwatch = () => active = false;\n  const watch = async () => {\n    let data = undefined;\n    if (emitOnBegin) data = await fn({\n      unpoll: unwatch\n    });\n    const initialWait = (await initialWaitTime?.(data)) ?? interval;\n    await wait(initialWait);\n    const poll = async () => {\n      if (!active) return;\n      await fn({\n        unpoll: unwatch\n      });\n      await wait(interval);\n      poll();\n    };\n    poll();\n  };\n  watch();\n  return unwatch;\n}\n//# sourceMappingURL=poll.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}