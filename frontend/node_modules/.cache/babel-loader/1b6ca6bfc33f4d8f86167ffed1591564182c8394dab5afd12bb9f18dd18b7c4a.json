{"ast":null,"code":"import { parseAccount } from '../../accounts/utils/parseAccount.js';\nimport { numberToHex } from '../../utils/encoding/toHex.js';\n/**\n * Extract capabilities that a connected wallet supports (e.g. paymasters, session keys, etc).\n *\n * - Docs: https://viem.sh/docs/actions/wallet/getCapabilities\n * - JSON-RPC Methods: [`wallet_getCapabilities`](https://eips.ethereum.org/EIPS/eip-5792)\n *\n * @param client - Client to use\n * @returns The wallet's capabilities. {@link GetCapabilitiesReturnType}\n *\n * @example\n * import { createWalletClient, custom } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getCapabilities } from 'viem/actions'\n *\n * const client = createWalletClient({\n *   chain: mainnet,\n *   transport: custom(window.ethereum),\n * })\n * const capabilities = await getCapabilities(client)\n */\nexport async function getCapabilities(client, parameters = {}) {\n  const {\n    account = client.account,\n    chainId\n  } = parameters;\n  const account_ = account ? parseAccount(account) : undefined;\n  const params = chainId ? [account_?.address, [numberToHex(chainId)]] : [account_?.address];\n  const capabilities_raw = await client.request({\n    method: 'wallet_getCapabilities',\n    params\n  });\n  const capabilities = {};\n  for (const [chainId, capabilities_] of Object.entries(capabilities_raw)) {\n    capabilities[Number(chainId)] = {};\n    for (let [key, value] of Object.entries(capabilities_)) {\n      if (key === 'addSubAccount') key = 'unstable_addSubAccount';\n      capabilities[Number(chainId)][key] = value;\n    }\n  }\n  return typeof chainId === 'number' ? capabilities[chainId] : capabilities;\n}","map":{"version":3,"names":["parseAccount","numberToHex","getCapabilities","client","parameters","account","chainId","account_","undefined","params","address","capabilities_raw","request","method","capabilities","capabilities_","Object","entries","Number","key","value"],"sources":["C:\\Users\\yyash\\Coding\\solana-brkout\\frontend\\node_modules\\viem\\actions\\wallet\\getCapabilities.ts"],"sourcesContent":["import type { Address } from 'abitype'\n\nimport { parseAccount } from '../../accounts/utils/parseAccount.js'\nimport type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport type { ErrorType } from '../../errors/utils.js'\nimport type { Account } from '../../types/account.js'\nimport type {\n  Capabilities,\n  ChainIdToCapabilities,\n  ExtractCapabilities,\n} from '../../types/capabilities.js'\nimport type { Prettify } from '../../types/utils.js'\nimport type { RequestErrorType } from '../../utils/buildRequest.js'\nimport { numberToHex } from '../../utils/encoding/toHex.js'\n\nexport type GetCapabilitiesParameters<\n  chainId extends number | undefined = undefined,\n> = {\n  account?: Account | Address | undefined\n  chainId?: chainId | number | undefined\n}\n\nexport type GetCapabilitiesReturnType<\n  chainId extends number | undefined = undefined,\n> = Prettify<\n  chainId extends number\n    ? ExtractCapabilities<'getCapabilities', 'ReturnType'>\n    : ChainIdToCapabilities<\n        Capabilities<ExtractCapabilities<'getCapabilities', 'ReturnType'>>,\n        number\n      >\n>\n\nexport type GetCapabilitiesErrorType = RequestErrorType | ErrorType\n\n/**\n * Extract capabilities that a connected wallet supports (e.g. paymasters, session keys, etc).\n *\n * - Docs: https://viem.sh/docs/actions/wallet/getCapabilities\n * - JSON-RPC Methods: [`wallet_getCapabilities`](https://eips.ethereum.org/EIPS/eip-5792)\n *\n * @param client - Client to use\n * @returns The wallet's capabilities. {@link GetCapabilitiesReturnType}\n *\n * @example\n * import { createWalletClient, custom } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getCapabilities } from 'viem/actions'\n *\n * const client = createWalletClient({\n *   chain: mainnet,\n *   transport: custom(window.ethereum),\n * })\n * const capabilities = await getCapabilities(client)\n */\nexport async function getCapabilities<\n  chainId extends number | undefined = undefined,\n>(\n  client: Client<Transport>,\n  parameters: GetCapabilitiesParameters<chainId> = {},\n): Promise<GetCapabilitiesReturnType<chainId>> {\n  const { account = client.account, chainId } = parameters\n\n  const account_ = account ? parseAccount(account) : undefined\n\n  const params = chainId\n    ? ([account_?.address, [numberToHex(chainId)]] as const)\n    : ([account_?.address] as const)\n  const capabilities_raw = await client.request({\n    method: 'wallet_getCapabilities',\n    params,\n  })\n\n  const capabilities = {} as ChainIdToCapabilities<\n    ExtractCapabilities<'getCapabilities', 'ReturnType'>,\n    number\n  >\n  for (const [chainId, capabilities_] of Object.entries(capabilities_raw)) {\n    capabilities[Number(chainId)] = {}\n    for (let [key, value] of Object.entries(capabilities_)) {\n      if (key === 'addSubAccount') key = 'unstable_addSubAccount'\n      capabilities[Number(chainId)][key] = value\n    }\n  }\n  return (\n    typeof chainId === 'number' ? capabilities[chainId] : capabilities\n  ) as never\n}\n"],"mappings":"AAEA,SAASA,YAAY,QAAQ,sCAAsC;AAYnE,SAASC,WAAW,QAAQ,+BAA+B;AAsB3D;;;;;;;;;;;;;;;;;;;;AAoBA,OAAO,eAAeC,eAAeA,CAGnCC,MAAyB,EACzBC,UAAA,GAAiD,EAAE;EAEnD,MAAM;IAAEC,OAAO,GAAGF,MAAM,CAACE,OAAO;IAAEC;EAAO,CAAE,GAAGF,UAAU;EAExD,MAAMG,QAAQ,GAAGF,OAAO,GAAGL,YAAY,CAACK,OAAO,CAAC,GAAGG,SAAS;EAE5D,MAAMC,MAAM,GAAGH,OAAO,GACjB,CAACC,QAAQ,EAAEG,OAAO,EAAE,CAACT,WAAW,CAACK,OAAO,CAAC,CAAC,CAAW,GACrD,CAACC,QAAQ,EAAEG,OAAO,CAAW;EAClC,MAAMC,gBAAgB,GAAG,MAAMR,MAAM,CAACS,OAAO,CAAC;IAC5CC,MAAM,EAAE,wBAAwB;IAChCJ;GACD,CAAC;EAEF,MAAMK,YAAY,GAAG,EAGpB;EACD,KAAK,MAAM,CAACR,OAAO,EAAES,aAAa,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACN,gBAAgB,CAAC,EAAE;IACvEG,YAAY,CAACI,MAAM,CAACZ,OAAO,CAAC,CAAC,GAAG,EAAE;IAClC,KAAK,IAAI,CAACa,GAAG,EAAEC,KAAK,CAAC,IAAIJ,MAAM,CAACC,OAAO,CAACF,aAAa,CAAC,EAAE;MACtD,IAAII,GAAG,KAAK,eAAe,EAAEA,GAAG,GAAG,wBAAwB;MAC3DL,YAAY,CAACI,MAAM,CAACZ,OAAO,CAAC,CAAC,CAACa,GAAG,CAAC,GAAGC,KAAK;IAC5C;EACF;EACA,OACE,OAAOd,OAAO,KAAK,QAAQ,GAAGQ,YAAY,CAACR,OAAO,CAAC,GAAGQ,YAAY;AAEtE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}