{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst utils_1 = require(\"./utils\");\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\nconst jsbi_1 = __importDefault(require(\"jsbi\"));\nconst MAX_UINT64 = 0xFFFFFFFFFFFFFFFF;\nconst rotl = (x, k) => jsbi_1.default.bitwiseXor(jsbi_1.default.asUintN(64, jsbi_1.default.leftShift(x, jsbi_1.default.BigInt(k))), jsbi_1.default.BigInt(jsbi_1.default.asUintN(64, jsbi_1.default.signedRightShift(x, jsbi_1.default.subtract(jsbi_1.default.BigInt(64), jsbi_1.default.BigInt(k))))));\nclass Xoshiro {\n  constructor(seed) {\n    this.next = () => {\n      return new bignumber_js_1.default(this.roll().toString());\n    };\n    this.nextDouble = () => {\n      return new bignumber_js_1.default(this.roll().toString()).div(MAX_UINT64 + 1);\n    };\n    this.nextInt = (low, high) => {\n      return Math.floor(this.nextDouble().toNumber() * (high - low + 1) + low);\n    };\n    this.nextByte = () => this.nextInt(0, 255);\n    this.nextData = count => [...new Array(count)].map(() => this.nextByte());\n    const digest = utils_1.sha256Hash(seed);\n    this.s = [jsbi_1.default.BigInt(0), jsbi_1.default.BigInt(0), jsbi_1.default.BigInt(0), jsbi_1.default.BigInt(0)];\n    this.setS(digest);\n  }\n  setS(digest) {\n    for (let i = 0; i < 4; i++) {\n      let o = i * 8;\n      let v = jsbi_1.default.BigInt(0);\n      for (let n = 0; n < 8; n++) {\n        v = jsbi_1.default.asUintN(64, jsbi_1.default.leftShift(v, jsbi_1.default.BigInt(8)));\n        v = jsbi_1.default.asUintN(64, jsbi_1.default.bitwiseOr(v, jsbi_1.default.BigInt(digest[o + n])));\n      }\n      this.s[i] = jsbi_1.default.asUintN(64, v);\n    }\n  }\n  roll() {\n    const result = jsbi_1.default.asUintN(64, jsbi_1.default.multiply(rotl(jsbi_1.default.asUintN(64, jsbi_1.default.multiply(this.s[1], jsbi_1.default.BigInt(5))), 7), jsbi_1.default.BigInt(9)));\n    const t = jsbi_1.default.asUintN(64, jsbi_1.default.leftShift(this.s[1], jsbi_1.default.BigInt(17)));\n    this.s[2] = jsbi_1.default.asUintN(64, jsbi_1.default.bitwiseXor(this.s[2], jsbi_1.default.BigInt(this.s[0])));\n    this.s[3] = jsbi_1.default.asUintN(64, jsbi_1.default.bitwiseXor(this.s[3], jsbi_1.default.BigInt(this.s[1])));\n    this.s[1] = jsbi_1.default.asUintN(64, jsbi_1.default.bitwiseXor(this.s[1], jsbi_1.default.BigInt(this.s[2])));\n    this.s[0] = jsbi_1.default.asUintN(64, jsbi_1.default.bitwiseXor(this.s[0], jsbi_1.default.BigInt(this.s[3])));\n    this.s[2] = jsbi_1.default.asUintN(64, jsbi_1.default.bitwiseXor(this.s[2], jsbi_1.default.BigInt(t)));\n    this.s[3] = jsbi_1.default.asUintN(64, rotl(this.s[3], 45));\n    return result;\n  }\n}\nexports.default = Xoshiro;\n//# sourceMappingURL=xoshiro.js.map","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}