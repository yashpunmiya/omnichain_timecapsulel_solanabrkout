{"ast":null,"code":"import { stringToBytes } from '../encoding/toBytes.js';\nimport { encodeLabelhash } from './encodeLabelhash.js';\nimport { labelhash } from './labelhash.js';\n/*\n * @description Encodes a DNS packet into a ByteArray containing a UDP payload.\n *\n * @example\n * packetToBytes('awkweb.eth')\n * '0x0661776b7765620365746800'\n *\n * @see https://docs.ens.domains/resolution/names#dns\n *\n */\nexport function packetToBytes(packet) {\n  // strip leading and trailing `.`\n  const value = packet.replace(/^\\.|\\.$/gm, '');\n  if (value.length === 0) return new Uint8Array(1);\n  const bytes = new Uint8Array(stringToBytes(value).byteLength + 2);\n  let offset = 0;\n  const list = value.split('.');\n  for (let i = 0; i < list.length; i++) {\n    let encoded = stringToBytes(list[i]);\n    // if the length is > 255, make the encoded label value a labelhash\n    // this is compatible with the universal resolver\n    if (encoded.byteLength > 255) encoded = stringToBytes(encodeLabelhash(labelhash(list[i])));\n    bytes[offset] = encoded.length;\n    bytes.set(encoded, offset + 1);\n    offset += encoded.length + 1;\n  }\n  if (bytes.byteLength !== offset + 1) return bytes.slice(0, offset + 1);\n  return bytes;\n}","map":{"version":3,"names":["stringToBytes","encodeLabelhash","labelhash","packetToBytes","packet","value","replace","length","Uint8Array","bytes","byteLength","offset","list","split","i","encoded","set","slice"],"sources":["C:\\Users\\yyash\\Coding\\solana-brkout\\frontend\\node_modules\\viem\\utils\\ens\\packetToBytes.ts"],"sourcesContent":["// Adapted from https://github.com/mafintosh/dns-packet\nimport type { ErrorType } from '../../errors/utils.js'\nimport type { ByteArray } from '../../types/misc.js'\nimport {\n  type StringToBytesErrorType,\n  stringToBytes,\n} from '../encoding/toBytes.js'\nimport {\n  type EncodeLabelhashErrorType,\n  encodeLabelhash,\n} from './encodeLabelhash.js'\nimport { type LabelhashErrorType, labelhash } from './labelhash.js'\n\nexport type PacketToBytesErrorType =\n  | EncodeLabelhashErrorType\n  | LabelhashErrorType\n  | StringToBytesErrorType\n  | ErrorType\n\n/*\n * @description Encodes a DNS packet into a ByteArray containing a UDP payload.\n *\n * @example\n * packetToBytes('awkweb.eth')\n * '0x0661776b7765620365746800'\n *\n * @see https://docs.ens.domains/resolution/names#dns\n *\n */\nexport function packetToBytes(packet: string): ByteArray {\n  // strip leading and trailing `.`\n  const value = packet.replace(/^\\.|\\.$/gm, '')\n  if (value.length === 0) return new Uint8Array(1)\n\n  const bytes = new Uint8Array(stringToBytes(value).byteLength + 2)\n\n  let offset = 0\n  const list = value.split('.')\n  for (let i = 0; i < list.length; i++) {\n    let encoded = stringToBytes(list[i])\n    // if the length is > 255, make the encoded label value a labelhash\n    // this is compatible with the universal resolver\n    if (encoded.byteLength > 255)\n      encoded = stringToBytes(encodeLabelhash(labelhash(list[i])))\n    bytes[offset] = encoded.length\n    bytes.set(encoded, offset + 1)\n    offset += encoded.length + 1\n  }\n\n  if (bytes.byteLength !== offset + 1) return bytes.slice(0, offset + 1)\n\n  return bytes\n}\n"],"mappings":"AAGA,SAEEA,aAAa,QACR,wBAAwB;AAC/B,SAEEC,eAAe,QACV,sBAAsB;AAC7B,SAAkCC,SAAS,QAAQ,gBAAgB;AAQnE;;;;;;;;;;AAUA,OAAM,SAAUC,aAAaA,CAACC,MAAc;EAC1C;EACA,MAAMC,KAAK,GAAGD,MAAM,CAACE,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;EAC7C,IAAID,KAAK,CAACE,MAAM,KAAK,CAAC,EAAE,OAAO,IAAIC,UAAU,CAAC,CAAC,CAAC;EAEhD,MAAMC,KAAK,GAAG,IAAID,UAAU,CAACR,aAAa,CAACK,KAAK,CAAC,CAACK,UAAU,GAAG,CAAC,CAAC;EAEjE,IAAIC,MAAM,GAAG,CAAC;EACd,MAAMC,IAAI,GAAGP,KAAK,CAACQ,KAAK,CAAC,GAAG,CAAC;EAC7B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,IAAI,CAACL,MAAM,EAAEO,CAAC,EAAE,EAAE;IACpC,IAAIC,OAAO,GAAGf,aAAa,CAACY,IAAI,CAACE,CAAC,CAAC,CAAC;IACpC;IACA;IACA,IAAIC,OAAO,CAACL,UAAU,GAAG,GAAG,EAC1BK,OAAO,GAAGf,aAAa,CAACC,eAAe,CAACC,SAAS,CAACU,IAAI,CAACE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9DL,KAAK,CAACE,MAAM,CAAC,GAAGI,OAAO,CAACR,MAAM;IAC9BE,KAAK,CAACO,GAAG,CAACD,OAAO,EAAEJ,MAAM,GAAG,CAAC,CAAC;IAC9BA,MAAM,IAAII,OAAO,CAACR,MAAM,GAAG,CAAC;EAC9B;EAEA,IAAIE,KAAK,CAACC,UAAU,KAAKC,MAAM,GAAG,CAAC,EAAE,OAAOF,KAAK,CAACQ,KAAK,CAAC,CAAC,EAAEN,MAAM,GAAG,CAAC,CAAC;EAEtE,OAAOF,KAAK;AACd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}