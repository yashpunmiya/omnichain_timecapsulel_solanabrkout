{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { LitElement, html } from 'lit';\nimport { state } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { ApiController, ConnectorController, CoreHelperUtil } from '@reown/appkit-controllers';\nimport { customElement } from '@reown/appkit-ui';\nimport '@reown/appkit-ui/wui-card-select-loader';\nimport '@reown/appkit-ui/wui-grid';\nimport { WalletUtil } from '../../utils/WalletUtil.js';\nimport '../w3m-all-wallets-list-item/index.js';\nimport styles from './styles.js';\nconst PAGINATOR_ID = 'local-paginator';\nlet W3mAllWalletsList = class W3mAllWalletsList extends LitElement {\n  constructor() {\n    super();\n    this.unsubscribe = [];\n    this.paginationObserver = undefined;\n    this.loading = !ApiController.state.wallets.length;\n    this.wallets = ApiController.state.wallets;\n    this.recommended = ApiController.state.recommended;\n    this.featured = ApiController.state.featured;\n    this.unsubscribe.push(...[ApiController.subscribeKey('wallets', val => this.wallets = val), ApiController.subscribeKey('recommended', val => this.recommended = val), ApiController.subscribeKey('featured', val => this.featured = val)]);\n  }\n  firstUpdated() {\n    this.initialFetch();\n    this.createPaginationObserver();\n  }\n  disconnectedCallback() {\n    this.unsubscribe.forEach(unsubscribe => unsubscribe());\n    this.paginationObserver?.disconnect();\n  }\n  render() {\n    return html`\n      <wui-grid\n        data-scroll=${!this.loading}\n        .padding=${['0', 's', 's', 's']}\n        columnGap=\"xxs\"\n        rowGap=\"l\"\n        justifyContent=\"space-between\"\n      >\n        ${this.loading ? this.shimmerTemplate(16) : this.walletsTemplate()}\n        ${this.paginationLoaderTemplate()}\n      </wui-grid>\n    `;\n  }\n  async initialFetch() {\n    this.loading = true;\n    const gridEl = this.shadowRoot?.querySelector('wui-grid');\n    if (gridEl) {\n      await ApiController.fetchWallets({\n        page: 1\n      });\n      await gridEl.animate([{\n        opacity: 1\n      }, {\n        opacity: 0\n      }], {\n        duration: 200,\n        fill: 'forwards',\n        easing: 'ease'\n      }).finished;\n      this.loading = false;\n      gridEl.animate([{\n        opacity: 0\n      }, {\n        opacity: 1\n      }], {\n        duration: 200,\n        fill: 'forwards',\n        easing: 'ease'\n      });\n    }\n  }\n  shimmerTemplate(items, id) {\n    return [...Array(items)].map(() => html`\n        <wui-card-select-loader type=\"wallet\" id=${ifDefined(id)}></wui-card-select-loader>\n      `);\n  }\n  walletsTemplate() {\n    const wallets = CoreHelperUtil.uniqueBy([...this.featured, ...this.recommended, ...this.wallets], 'id');\n    const walletsWithInstalled = WalletUtil.markWalletsAsInstalled(wallets);\n    return walletsWithInstalled.map(wallet => html`\n        <w3m-all-wallets-list-item\n          @click=${() => this.onConnectWallet(wallet)}\n          .wallet=${wallet}\n        ></w3m-all-wallets-list-item>\n      `);\n  }\n  paginationLoaderTemplate() {\n    const {\n      wallets,\n      recommended,\n      featured,\n      count\n    } = ApiController.state;\n    const columns = window.innerWidth < 352 ? 3 : 4;\n    const currentWallets = wallets.length + recommended.length;\n    const minimumRows = Math.ceil(currentWallets / columns);\n    let shimmerCount = minimumRows * columns - currentWallets + columns;\n    shimmerCount -= wallets.length ? featured.length % columns : 0;\n    if (count === 0 && featured.length > 0) {\n      return null;\n    }\n    if (count === 0 || [...featured, ...wallets, ...recommended].length < count) {\n      return this.shimmerTemplate(shimmerCount, PAGINATOR_ID);\n    }\n    return null;\n  }\n  createPaginationObserver() {\n    const loaderEl = this.shadowRoot?.querySelector(`#${PAGINATOR_ID}`);\n    if (loaderEl) {\n      this.paginationObserver = new IntersectionObserver(([element]) => {\n        if (element?.isIntersecting && !this.loading) {\n          const {\n            page,\n            count,\n            wallets\n          } = ApiController.state;\n          if (wallets.length < count) {\n            ApiController.fetchWallets({\n              page: page + 1\n            });\n          }\n        }\n      });\n      this.paginationObserver.observe(loaderEl);\n    }\n  }\n  onConnectWallet(wallet) {\n    ConnectorController.selectWalletConnector(wallet);\n  }\n};\nW3mAllWalletsList.styles = styles;\n__decorate([state()], W3mAllWalletsList.prototype, \"loading\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"wallets\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"recommended\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"featured\", void 0);\nW3mAllWalletsList = __decorate([customElement('w3m-all-wallets-list')], W3mAllWalletsList);\nexport { W3mAllWalletsList };","map":{"version":3,"names":["LitElement","html","state","ifDefined","ApiController","ConnectorController","CoreHelperUtil","customElement","WalletUtil","styles","PAGINATOR_ID","W3mAllWalletsList","constructor","unsubscribe","paginationObserver","undefined","loading","wallets","length","recommended","featured","push","subscribeKey","val","firstUpdated","initialFetch","createPaginationObserver","disconnectedCallback","forEach","disconnect","render","shimmerTemplate","walletsTemplate","paginationLoaderTemplate","gridEl","shadowRoot","querySelector","fetchWallets","page","animate","opacity","duration","fill","easing","finished","items","id","Array","map","uniqueBy","walletsWithInstalled","markWalletsAsInstalled","wallet","onConnectWallet","count","columns","window","innerWidth","currentWallets","minimumRows","Math","ceil","shimmerCount","loaderEl","IntersectionObserver","element","isIntersecting","observe","selectWalletConnector","__decorate"],"sources":["../../../../../src/partials/w3m-all-wallets-list/index.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}