{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst fountainEncoder_1 = __importDefault(require(\"./fountainEncoder\"));\nconst bytewords_1 = __importDefault(require(\"./bytewords\"));\nclass UREncoder {\n  constructor(_ur, maxFragmentLength, firstSeqNum, minFragmentLength) {\n    this.ur = _ur;\n    this.fountainEncoder = new fountainEncoder_1.default(_ur.cbor, maxFragmentLength, firstSeqNum, minFragmentLength);\n  }\n  get fragmentsLength() {\n    return this.fountainEncoder.fragmentsLength;\n  }\n  get fragments() {\n    return this.fountainEncoder.fragments;\n  }\n  get messageLength() {\n    return this.fountainEncoder.messageLength;\n  }\n  get cbor() {\n    return this.ur.cbor;\n  }\n  encodeWhole() {\n    return [...new Array(this.fragmentsLength)].map(() => this.nextPart());\n  }\n  nextPart() {\n    const part = this.fountainEncoder.nextPart();\n    if (this.fountainEncoder.isSinglePart()) {\n      return UREncoder.encodeSinglePart(this.ur);\n    } else {\n      return UREncoder.encodePart(this.ur.type, part);\n    }\n  }\n  static encodeUri(scheme, pathComponents) {\n    const path = pathComponents.join('/');\n    return [scheme, path].join(':');\n  }\n  static encodeUR(pathComponents) {\n    return UREncoder.encodeUri('ur', pathComponents);\n  }\n  static encodePart(type, part) {\n    const seq = `${part.seqNum}-${part.seqLength}`;\n    const body = bytewords_1.default.encode(part.cbor().toString('hex'), bytewords_1.default.STYLES.MINIMAL);\n    return UREncoder.encodeUR([type, seq, body]);\n  }\n  static encodeSinglePart(ur) {\n    const body = bytewords_1.default.encode(ur.cbor.toString('hex'), bytewords_1.default.STYLES.MINIMAL);\n    return UREncoder.encodeUR([ur.type, body]);\n  }\n}\nexports.default = UREncoder;\n//# sourceMappingURL=urEncoder.js.map","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}