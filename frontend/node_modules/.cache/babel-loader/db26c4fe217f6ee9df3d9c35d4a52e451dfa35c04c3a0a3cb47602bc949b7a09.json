{"ast":null,"code":"import { registerWallet } from '@wallet-standard/wallet';\nimport { SolflareMetaMaskWallet } from './wallet.js';\nlet registered = false;\nfunction register() {\n  if (registered) return;\n  registerWallet(new SolflareMetaMaskWallet());\n  registered = true;\n}\n/** @internal */\nexport async function detectAndRegisterSolflareMetaMaskWallet() {\n  const id = 'solflare-detect-metamask';\n  function postMessage() {\n    window.postMessage({\n      target: 'metamask-contentscript',\n      data: {\n        name: 'metamask-provider',\n        data: {\n          id,\n          jsonrpc: '2.0',\n          method: 'wallet_getSnaps'\n        }\n      }\n    }, window.location.origin);\n  }\n  function onMessage(event) {\n    const message = event.data;\n    if (message?.target === 'metamask-inpage' && message.data?.name === 'metamask-provider') {\n      if (message.data.data?.id === id) {\n        window.removeEventListener('message', onMessage);\n        if (!message.data.data.error) {\n          register();\n        }\n      } else {\n        postMessage();\n      }\n    }\n  }\n  window.addEventListener('message', onMessage);\n  window.setTimeout(() => window.removeEventListener('message', onMessage), 5000);\n  postMessage();\n}\n//# sourceMappingURL=detect.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}