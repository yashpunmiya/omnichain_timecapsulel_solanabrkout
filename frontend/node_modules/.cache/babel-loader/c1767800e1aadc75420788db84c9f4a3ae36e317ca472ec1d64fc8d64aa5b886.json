{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultiKey = void 0;\nconst CryptoECKey_1 = require(\"./CryptoECKey\");\nconst CryptoHDKey_1 = require(\"./CryptoHDKey\");\nconst DataItem_1 = require(\"./lib/DataItem\");\nconst RegistryItem_1 = require(\"./RegistryItem\");\nconst RegistryType_1 = require(\"./RegistryType\");\nvar Keys;\n(function (Keys) {\n  Keys[Keys[\"threshold\"] = 1] = \"threshold\";\n  Keys[Keys[\"keys\"] = 2] = \"keys\";\n})(Keys || (Keys = {}));\nclass MultiKey extends RegistryItem_1.RegistryItem {\n  constructor(threshold, keys) {\n    super();\n    this.threshold = threshold;\n    this.keys = keys;\n    this.getThreshold = () => this.threshold;\n    this.getKeys = () => this.keys;\n    this.toDataItem = () => {\n      const map = {};\n      map[Keys.threshold] = this.threshold;\n      const keys = this.keys.map(k => {\n        const dataItem = k.toDataItem();\n        dataItem.setTag(k.getRegistryType().getTag());\n        return dataItem;\n      });\n      map[Keys.keys] = keys;\n      return new DataItem_1.DataItem(map);\n    };\n    this.getOutputDescriptorContent = () => {\n      return [this.getThreshold(), this.keys.map(k => k.getOutputDescriptorContent()).join(',')].join(',');\n    };\n  }\n}\nexports.MultiKey = MultiKey;\nMultiKey.fromDataItem = dataItem => {\n  const map = dataItem.getData();\n  const threshold = map[Keys.threshold];\n  const _keys = map[Keys.keys];\n  const keys = [];\n  _keys.forEach(k => {\n    if (k.getTag() === RegistryType_1.RegistryTypes.CRYPTO_HDKEY.getTag()) {\n      keys.push(CryptoHDKey_1.CryptoHDKey.fromDataItem(k));\n    } else if (k.getTag() === RegistryType_1.RegistryTypes.CRYPTO_ECKEY.getTag()) {\n      keys.push(CryptoECKey_1.CryptoECKey.fromDataItem(k));\n    }\n  });\n  return new MultiKey(threshold, keys);\n};","map":{"version":3,"names":["CryptoECKey_1","require","CryptoHDKey_1","DataItem_1","RegistryItem_1","RegistryType_1","Keys","MultiKey","RegistryItem","constructor","threshold","keys","getThreshold","getKeys","toDataItem","map","k","dataItem","setTag","getRegistryType","getTag","DataItem","getOutputDescriptorContent","join","exports","fromDataItem","getData","_keys","forEach","RegistryTypes","CRYPTO_HDKEY","push","CryptoHDKey","CRYPTO_ECKEY","CryptoECKey"],"sources":["C:\\Users\\yyash\\Coding\\solana-brkout\\frontend\\node_modules\\@keystonehq\\bc-ur-registry\\src\\MultiKey.ts"],"sourcesContent":["import { CryptoECKey } from './CryptoECKey';\nimport { CryptoHDKey } from './CryptoHDKey';\nimport { DataItem } from './lib/DataItem';\nimport { RegistryItem } from './RegistryItem';\nimport { RegistryType, RegistryTypes } from './RegistryType';\nimport { DataItemMap } from './types';\n\nenum Keys {\n  threshold = 1,\n  keys,\n}\n\nexport class MultiKey extends RegistryItem {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  getRegistryType: () => RegistryType;\n\n  constructor(\n    private threshold: number,\n    private keys: (CryptoECKey | CryptoHDKey)[],\n  ) {\n    super();\n  }\n\n  getThreshold = () => this.threshold;\n  getKeys = () => this.keys;\n\n  toDataItem = () => {\n    const map: DataItemMap = {};\n    map[Keys.threshold] = this.threshold;\n    const keys: DataItem[] = this.keys.map((k) => {\n      const dataItem = k.toDataItem();\n      dataItem.setTag(k.getRegistryType().getTag());\n      return dataItem;\n    });\n    map[Keys.keys] = keys;\n    return new DataItem(map);\n  };\n\n  getOutputDescriptorContent = () => {\n    return [this.getThreshold(),\n      this.keys.map(k => k.getOutputDescriptorContent()).join(','),\n    ].join(',');\n  };\n\n  static fromDataItem = (dataItem: DataItem) => {\n    const map = dataItem.getData();\n    const threshold = map[Keys.threshold];\n    const _keys = map[Keys.keys] as DataItem[];\n    const keys: (CryptoECKey | CryptoHDKey)[] = [];\n    _keys.forEach((k) => {\n      if (k.getTag() === RegistryTypes.CRYPTO_HDKEY.getTag()) {\n        keys.push(CryptoHDKey.fromDataItem(k));\n      } else if (k.getTag() === RegistryTypes.CRYPTO_ECKEY.getTag()) {\n        keys.push(CryptoECKey.fromDataItem(k));\n      }\n    });\n    return new MultiKey(threshold, keys);\n  };\n}\n"],"mappings":";;;;;;AAAA,MAAAA,aAAA,GAAAC,OAAA;AACA,MAAAC,aAAA,GAAAD,OAAA;AACA,MAAAE,UAAA,GAAAF,OAAA;AACA,MAAAG,cAAA,GAAAH,OAAA;AACA,MAAAI,cAAA,GAAAJ,OAAA;AAGA,IAAKK,IAGJ;AAHD,WAAKA,IAAI;EACPA,IAAA,CAAAA,IAAA,gCAAa;EACbA,IAAA,CAAAA,IAAA,sBAAI;AACN,CAAC,EAHIA,IAAI,KAAJA,IAAI;AAKT,MAAaC,QAAS,SAAQH,cAAA,CAAAI,YAAY;EAKxCC,YACUC,SAAiB,EACjBC,IAAmC;IAE3C,KAAK,EAAE;IAHC,KAAAD,SAAS,GAATA,SAAS;IACT,KAAAC,IAAI,GAAJA,IAAI;IAKd,KAAAC,YAAY,GAAG,MAAM,IAAI,CAACF,SAAS;IACnC,KAAAG,OAAO,GAAG,MAAM,IAAI,CAACF,IAAI;IAEzB,KAAAG,UAAU,GAAG,MAAK;MAChB,MAAMC,GAAG,GAAgB,EAAE;MAC3BA,GAAG,CAACT,IAAI,CAACI,SAAS,CAAC,GAAG,IAAI,CAACA,SAAS;MACpC,MAAMC,IAAI,GAAe,IAAI,CAACA,IAAI,CAACI,GAAG,CAAEC,CAAC,IAAI;QAC3C,MAAMC,QAAQ,GAAGD,CAAC,CAACF,UAAU,EAAE;QAC/BG,QAAQ,CAACC,MAAM,CAACF,CAAC,CAACG,eAAe,EAAE,CAACC,MAAM,EAAE,CAAC;QAC7C,OAAOH,QAAQ;MACjB,CAAC,CAAC;MACFF,GAAG,CAACT,IAAI,CAACK,IAAI,CAAC,GAAGA,IAAI;MACrB,OAAO,IAAIR,UAAA,CAAAkB,QAAQ,CAACN,GAAG,CAAC;IAC1B,CAAC;IAED,KAAAO,0BAA0B,GAAG,MAAK;MAChC,OAAO,CAAC,IAAI,CAACV,YAAY,EAAE,EACzB,IAAI,CAACD,IAAI,CAACI,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACM,0BAA0B,EAAE,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAC7D,CAACA,IAAI,CAAC,GAAG,CAAC;IACb,CAAC;EArBD;;AAVFC,OAAA,CAAAjB,QAAA,GAAAA,QAAA;AAiCSA,QAAA,CAAAkB,YAAY,GAAIR,QAAkB,IAAI;EAC3C,MAAMF,GAAG,GAAGE,QAAQ,CAACS,OAAO,EAAE;EAC9B,MAAMhB,SAAS,GAAGK,GAAG,CAACT,IAAI,CAACI,SAAS,CAAC;EACrC,MAAMiB,KAAK,GAAGZ,GAAG,CAACT,IAAI,CAACK,IAAI,CAAe;EAC1C,MAAMA,IAAI,GAAkC,EAAE;EAC9CgB,KAAK,CAACC,OAAO,CAAEZ,CAAC,IAAI;IAClB,IAAIA,CAAC,CAACI,MAAM,EAAE,KAAKf,cAAA,CAAAwB,aAAa,CAACC,YAAY,CAACV,MAAM,EAAE,EAAE;MACtDT,IAAI,CAACoB,IAAI,CAAC7B,aAAA,CAAA8B,WAAW,CAACP,YAAY,CAACT,CAAC,CAAC,CAAC;KACvC,MAAM,IAAIA,CAAC,CAACI,MAAM,EAAE,KAAKf,cAAA,CAAAwB,aAAa,CAACI,YAAY,CAACb,MAAM,EAAE,EAAE;MAC7DT,IAAI,CAACoB,IAAI,CAAC/B,aAAA,CAAAkC,WAAW,CAACT,YAAY,CAACT,CAAC,CAAC,CAAC;;EAE1C,CAAC,CAAC;EACF,OAAO,IAAIT,QAAQ,CAACG,SAAS,EAAEC,IAAI,CAAC;AACtC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}