{"ast":null,"code":"import { LruMap } from '../lru.js';\n/** @internal */\nexport const promiseCache = /*#__PURE__*/new LruMap(8192);\n/** Deduplicates in-flight promises. */\nexport function withDedupe(fn, {\n  enabled = true,\n  id\n}) {\n  if (!enabled || !id) return fn();\n  if (promiseCache.get(id)) return promiseCache.get(id);\n  const promise = fn().finally(() => promiseCache.delete(id));\n  promiseCache.set(id, promise);\n  return promise;\n}\n//# sourceMappingURL=withDedupe.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}