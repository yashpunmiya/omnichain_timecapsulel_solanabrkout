{"ast":null,"code":"export class Connection {\n  constructor(validatedOrigin, targetWindow) {\n    this.validatedOrigin = validatedOrigin;\n    this.targetWindow = targetWindow;\n    this.handlers = new Map();\n  }\n  off(event, callback) {\n    const eventCallbacks = this.handlers.get(event);\n    eventCallbacks === null || eventCallbacks === void 0 ? void 0 : eventCallbacks.delete(callback);\n  }\n  on(event, callback) {\n    var _a;\n    const eventCallbacks = (_a = this.handlers.get(event)) !== null && _a !== void 0 ? _a : new Set();\n    eventCallbacks.add(callback);\n    this.handlers.set(event, eventCallbacks);\n  }\n  send({\n    event,\n    payload\n  }) {\n    this.targetWindow.postMessage({\n      event,\n      payload\n    }, this.validatedOrigin);\n  }\n  runHandlersForEvent(event, payload) {\n    const eventCallbacks = this.handlers.get(event);\n    if (!eventCallbacks) {\n      return;\n    }\n    for (const callback of eventCallbacks) {\n      callback(payload);\n    }\n  }\n  resetHandlers() {\n    this.handlers.clear();\n  }\n  export() {\n    return {\n      off: this.off.bind(this),\n      on: this.on.bind(this),\n      send: this.send.bind(this),\n      validatedOrigin: this.validatedOrigin\n    };\n  }\n}\n//# sourceMappingURL=connection.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}