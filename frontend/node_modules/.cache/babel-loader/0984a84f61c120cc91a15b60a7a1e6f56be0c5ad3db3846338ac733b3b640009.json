{"ast":null,"code":"import UniversalProvider from '@walletconnect/universal-provider';\nimport { ConstantsUtil, NetworkUtil, ParseUtil } from '@reown/appkit-common';\nimport { AccountController, AlertController, AssetUtil, BlockchainApiController, ChainController, ConnectionController, ConnectorController, CoreHelperUtil, EnsController, EventsController, ModalController, OptionsController, PublicStateController, RouterController, SnackController, StorageUtil, ThemeController } from '@reown/appkit-controllers';\nimport { WalletUtil } from '@reown/appkit-scaffold-ui/utils';\nimport { setColorTheme, setThemeVariables } from '@reown/appkit-ui';\nimport { CaipNetworksUtil, ErrorUtil, HelpersUtil, LoggerUtil, ConstantsUtil as UtilConstantsUtil } from '@reown/appkit-utils';\nimport { ProviderUtil } from '@reown/appkit-utils';\nimport { UniversalAdapter } from '../universal-adapter/client.js';\nimport { WcHelpersUtil } from '../utils/index.js';\nexport class AppKitBaseClient {\n  constructor(options) {\n    this.hasSwitchedToPreferredAccountTypeOnConnect = false;\n    this.chainNamespaces = [];\n    this.reportedAlertErrors = {};\n    // -- Public Internal ---------------------------------------------------\n    this.getCaipNetwork = chainNamespace => {\n      if (chainNamespace) {\n        const namespaceCaipNetwork = ChainController.getNetworkData(chainNamespace)?.caipNetwork;\n        if (namespaceCaipNetwork) {\n          return namespaceCaipNetwork;\n        }\n        return ChainController.getRequestedCaipNetworks(chainNamespace).filter(c => c.chainNamespace === chainNamespace)?.[0];\n      }\n      return ChainController.state.activeCaipNetwork || this.defaultCaipNetwork;\n    };\n    this.getCaipNetworkId = () => {\n      const network = this.getCaipNetwork();\n      if (network) {\n        return network.id;\n      }\n      return undefined;\n    };\n    this.getCaipNetworks = namespace => ChainController.getRequestedCaipNetworks(namespace);\n    this.getActiveChainNamespace = () => ChainController.state.activeChain;\n    this.setRequestedCaipNetworks = (requestedCaipNetworks, chain) => {\n      ChainController.setRequestedCaipNetworks(requestedCaipNetworks, chain);\n    };\n    this.getApprovedCaipNetworkIds = () => ChainController.getAllApprovedCaipNetworkIds();\n    this.getCaipAddress = chainNamespace => {\n      if (ChainController.state.activeChain === chainNamespace || !chainNamespace) {\n        return ChainController.state.activeCaipAddress;\n      }\n      return ChainController.getAccountProp('caipAddress', chainNamespace);\n    };\n    this.setClientId = clientId => {\n      BlockchainApiController.setClientId(clientId);\n    };\n    this.getProvider = namespace => ProviderUtil.getProvider(namespace);\n    this.getProviderType = namespace => ProviderUtil.getProviderId(namespace);\n    this.getPreferredAccountType = () => AccountController.state.preferredAccountType;\n    this.setCaipAddress = (caipAddress, chain) => {\n      AccountController.setCaipAddress(caipAddress, chain);\n    };\n    this.setBalance = (balance, balanceSymbol, chain) => {\n      AccountController.setBalance(balance, balanceSymbol, chain);\n    };\n    this.setProfileName = (profileName, chain) => {\n      AccountController.setProfileName(profileName, chain);\n    };\n    this.setProfileImage = (profileImage, chain) => {\n      AccountController.setProfileImage(profileImage, chain);\n    };\n    this.setUser = (user, chain) => {\n      AccountController.setUser(user, chain);\n      if (OptionsController.state.enableEmbedded) {\n        ModalController.close();\n      }\n    };\n    this.resetAccount = chain => {\n      AccountController.resetAccount(chain);\n    };\n    this.setCaipNetwork = caipNetwork => {\n      ChainController.setActiveCaipNetwork(caipNetwork);\n    };\n    this.setCaipNetworkOfNamespace = (caipNetwork, chainNamespace) => {\n      ChainController.setChainNetworkData(chainNamespace, {\n        caipNetwork\n      });\n    };\n    this.setAllAccounts = (addresses, chain) => {\n      AccountController.setAllAccounts(addresses, chain);\n      OptionsController.setHasMultipleAddresses(addresses?.length > 1);\n    };\n    this.setStatus = (status, chain) => {\n      AccountController.setStatus(status, chain);\n      // If at least one namespace is connected, set the connection status\n      if (ConnectorController.isConnected()) {\n        StorageUtil.setConnectionStatus('connected');\n      } else {\n        StorageUtil.setConnectionStatus('disconnected');\n      }\n    };\n    this.getAddressByChainNamespace = chainNamespace => ChainController.getAccountProp('address', chainNamespace);\n    this.setConnectors = connectors => {\n      const allConnectors = [...ConnectorController.getConnectors(), ...connectors];\n      ConnectorController.setConnectors(allConnectors);\n    };\n    this.fetchIdentity = request => BlockchainApiController.fetchIdentity(request);\n    this.getReownName = address => EnsController.getNamesForAddress(address);\n    this.getConnectors = () => ConnectorController.getConnectors();\n    this.getConnectorImage = connector => AssetUtil.getConnectorImage(connector);\n    this.setConnectedWalletInfo = (connectedWalletInfo, chain) => {\n      const type = ProviderUtil.getProviderId(chain);\n      const walletInfo = connectedWalletInfo ? {\n        ...connectedWalletInfo,\n        type\n      } : undefined;\n      AccountController.setConnectedWalletInfo(walletInfo, chain);\n    };\n    this.getIsConnectedState = () => Boolean(ChainController.state.activeCaipAddress);\n    this.addAddressLabel = (address, label, chain) => {\n      AccountController.addAddressLabel(address, label, chain);\n    };\n    this.removeAddressLabel = (address, chain) => {\n      AccountController.removeAddressLabel(address, chain);\n    };\n    this.getAddress = chainNamespace => {\n      if (ChainController.state.activeChain === chainNamespace || !chainNamespace) {\n        return AccountController.state.address;\n      }\n      return ChainController.getAccountProp('address', chainNamespace);\n    };\n    this.setApprovedCaipNetworksData = namespace => ChainController.setApprovedCaipNetworksData(namespace);\n    this.resetNetwork = namespace => {\n      ChainController.resetNetwork(namespace);\n    };\n    this.addConnector = connector => {\n      ConnectorController.addConnector(connector);\n    };\n    this.resetWcConnection = () => {\n      ConnectionController.resetWcConnection();\n    };\n    this.setAddressExplorerUrl = (addressExplorerUrl, chain) => {\n      AccountController.setAddressExplorerUrl(addressExplorerUrl, chain);\n    };\n    this.setSmartAccountDeployed = (isDeployed, chain) => {\n      AccountController.setSmartAccountDeployed(isDeployed, chain);\n    };\n    this.setSmartAccountEnabledNetworks = (smartAccountEnabledNetworks, chain) => {\n      ChainController.setSmartAccountEnabledNetworks(smartAccountEnabledNetworks, chain);\n    };\n    this.setPreferredAccountType = (preferredAccountType, chain) => {\n      AccountController.setPreferredAccountType(preferredAccountType, chain);\n    };\n    this.setEIP6963Enabled = enabled => {\n      OptionsController.setEIP6963Enabled(enabled);\n    };\n    this.handleUnsafeRPCRequest = () => {\n      if (this.isOpen()) {\n        // If we are on the modal but there is no transaction stack, close the modal\n        if (this.isTransactionStackEmpty()) {\n          return;\n        }\n        // Check if we need to replace or redirect\n        this.redirect('ApproveTransaction');\n      } else {\n        // If called from outside the modal, open ApproveTransaction\n        this.open({\n          view: 'ApproveTransaction'\n        });\n      }\n    };\n    this.options = options;\n    this.version = options.sdkVersion;\n    this.caipNetworks = this.extendCaipNetworks(options);\n    this.chainNamespaces = [...new Set(this.caipNetworks?.map(caipNetwork => caipNetwork.chainNamespace))];\n    this.defaultCaipNetwork = this.extendDefaultCaipNetwork(options);\n    this.chainAdapters = this.createAdapters(options.adapters);\n    this.initialize(options);\n    this.sendInitializeEvent(options);\n  }\n  async initialize(options) {\n    this.initControllers(options);\n    await this.initChainAdapters();\n    await this.injectModalUi();\n    await this.syncExistingConnection();\n    PublicStateController.set({\n      initialized: true\n    });\n  }\n  sendInitializeEvent(options) {\n    const {\n      ...optionsCopy\n    } = options;\n    delete optionsCopy.adapters;\n    EventsController.sendEvent({\n      type: 'track',\n      event: 'INITIALIZE',\n      properties: {\n        ...optionsCopy,\n        networks: options.networks.map(n => n.id),\n        siweConfig: {\n          options: options.siweConfig?.options || {}\n        }\n      }\n    });\n  }\n  // -- Controllers initialization ---------------------------------------------------\n  initControllers(options) {\n    this.initializeOptionsController(options);\n    this.initializeChainController(options);\n    this.initializeThemeController(options);\n    this.initializeConnectionController(options);\n    this.initializeConnectorController();\n  }\n  initializeThemeController(options) {\n    if (options.themeMode) {\n      ThemeController.setThemeMode(options.themeMode);\n    }\n    if (options.themeVariables) {\n      ThemeController.setThemeVariables(options.themeVariables);\n    }\n  }\n  initializeChainController(options) {\n    if (!this.connectionControllerClient || !this.networkControllerClient) {\n      throw new Error('ConnectionControllerClient and NetworkControllerClient must be set');\n    }\n    ChainController.initialize(options.adapters ?? [], this.caipNetworks, {\n      connectionControllerClient: this.connectionControllerClient,\n      networkControllerClient: this.networkControllerClient\n    });\n    const network = this.getDefaultNetwork();\n    if (network) {\n      ChainController.setActiveCaipNetwork(network);\n    }\n  }\n  initializeConnectionController(options) {\n    ConnectionController.setWcBasic(options.basic ?? false);\n  }\n  initializeConnectorController() {\n    ConnectorController.initialize(this.chainNamespaces);\n  }\n  initializeOptionsController(options) {\n    OptionsController.setDebug(options.debug !== false);\n    // On by default\n    OptionsController.setEnableWalletConnect(options.enableWalletConnect !== false);\n    OptionsController.setEnableWalletGuide(options.enableWalletGuide !== false);\n    OptionsController.setEnableWallets(options.enableWallets !== false);\n    OptionsController.setEIP6963Enabled(options.enableEIP6963 !== false);\n    OptionsController.setEnableNetworkSwitch(options.enableNetworkSwitch !== false);\n    OptionsController.setEnableAuthLogger(options.enableAuthLogger !== false);\n    OptionsController.setCustomRpcUrls(options.customRpcUrls);\n    OptionsController.setSdkVersion(options.sdkVersion);\n    OptionsController.setProjectId(options.projectId);\n    OptionsController.setEnableEmbedded(options.enableEmbedded);\n    OptionsController.setAllWallets(options.allWallets);\n    OptionsController.setIncludeWalletIds(options.includeWalletIds);\n    OptionsController.setExcludeWalletIds(options.excludeWalletIds);\n    OptionsController.setFeaturedWalletIds(options.featuredWalletIds);\n    OptionsController.setTokens(options.tokens);\n    OptionsController.setTermsConditionsUrl(options.termsConditionsUrl);\n    OptionsController.setPrivacyPolicyUrl(options.privacyPolicyUrl);\n    OptionsController.setCustomWallets(options.customWallets);\n    OptionsController.setFeatures(options.features);\n    OptionsController.setAllowUnsupportedChain(options.allowUnsupportedChain);\n    OptionsController.setDefaultAccountTypes(options.defaultAccountTypes);\n    OptionsController.setUniversalProviderConfigOverride(options.universalProviderConfigOverride);\n    const defaultMetaData = this.getDefaultMetaData();\n    if (!options.metadata && defaultMetaData) {\n      options.metadata = defaultMetaData;\n    }\n    OptionsController.setMetadata(options.metadata);\n    OptionsController.setDisableAppend(options.disableAppend);\n    OptionsController.setEnableEmbedded(options.enableEmbedded);\n    OptionsController.setSIWX(options.siwx);\n    if (!options.projectId) {\n      AlertController.open(ErrorUtil.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED, 'error');\n      return;\n    }\n    const evmAdapter = options.adapters?.find(adapter => adapter.namespace === ConstantsUtil.CHAIN.EVM);\n    // Set the SIWE client for EVM chains\n    if (evmAdapter) {\n      if (options.siweConfig) {\n        if (options.siwx) {\n          throw new Error('Cannot set both `siweConfig` and `siwx` options');\n        }\n        OptionsController.setSIWX(options.siweConfig.mapToSIWX());\n      }\n    }\n  }\n  getDefaultMetaData() {\n    if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n      return {\n        name: document.getElementsByTagName('title')?.[0]?.textContent || '',\n        description: document.querySelector('meta[property=\"og:description\"]')?.content || '',\n        url: window.location.origin,\n        icons: [document.querySelector('link[rel~=\"icon\"]')?.href || '']\n      };\n    }\n    return null;\n  }\n  // -- Network Initialization ---------------------------------------------------\n  setUnsupportedNetwork(chainId) {\n    const namespace = this.getActiveChainNamespace();\n    if (namespace) {\n      const unsupportedNetwork = CaipNetworksUtil.getUnsupportedNetwork(`${namespace}:${chainId}`);\n      ChainController.setActiveCaipNetwork(unsupportedNetwork);\n    }\n  }\n  getDefaultNetwork() {\n    return CaipNetworksUtil.getCaipNetworkFromStorage(this.defaultCaipNetwork);\n  }\n  extendCaipNetwork(network, options) {\n    const extendedNetwork = CaipNetworksUtil.extendCaipNetwork(network, {\n      customNetworkImageUrls: options.chainImages,\n      projectId: options.projectId\n    });\n    return extendedNetwork;\n  }\n  extendCaipNetworks(options) {\n    const extendedNetworks = CaipNetworksUtil.extendCaipNetworks(options.networks, {\n      customNetworkImageUrls: options.chainImages,\n      customRpcUrls: options.customRpcUrls,\n      projectId: options.projectId\n    });\n    return extendedNetworks;\n  }\n  extendDefaultCaipNetwork(options) {\n    const defaultNetwork = options.networks.find(n => n.id === options.defaultNetwork?.id);\n    const extendedNetwork = defaultNetwork ? CaipNetworksUtil.extendCaipNetwork(defaultNetwork, {\n      customNetworkImageUrls: options.chainImages,\n      customRpcUrls: options.customRpcUrls,\n      projectId: options.projectId\n    }) : undefined;\n    return extendedNetwork;\n  }\n  // -- Client Initialization ---------------------------------------------------\n  createClients() {\n    this.connectionControllerClient = {\n      connectWalletConnect: async () => {\n        const activeChain = ChainController.state.activeChain;\n        const adapter = this.getAdapter(activeChain);\n        const chainId = this.getCaipNetwork(activeChain)?.id;\n        if (!adapter) {\n          throw new Error('Adapter not found');\n        }\n        const result = await adapter.connectWalletConnect(chainId);\n        this.close();\n        this.setClientId(result?.clientId || null);\n        StorageUtil.setConnectedNamespaces([...ChainController.state.chains.keys()]);\n        this.chainNamespaces.forEach(namespace => {\n          ConnectorController.setConnectorId(UtilConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT, namespace);\n        });\n        await this.syncWalletConnectAccount();\n      },\n      connectExternal: async ({\n        id,\n        info,\n        type,\n        provider,\n        chain,\n        caipNetwork\n      }) => {\n        const activeChain = ChainController.state.activeChain;\n        const chainToUse = chain || activeChain;\n        const adapter = this.getAdapter(chainToUse);\n        if (chain && chain !== activeChain && !caipNetwork) {\n          const toConnectNetwork = this.caipNetworks?.find(network => network.chainNamespace === chain);\n          if (toConnectNetwork) {\n            this.setCaipNetwork(toConnectNetwork);\n          }\n        }\n        if (!adapter) {\n          throw new Error('Adapter not found');\n        }\n        const fallbackCaipNetwork = this.getCaipNetwork(chainToUse);\n        const res = await adapter.connect({\n          id,\n          info,\n          type,\n          provider,\n          chainId: caipNetwork?.id || fallbackCaipNetwork?.id,\n          rpcUrl: caipNetwork?.rpcUrls?.default?.http?.[0] || fallbackCaipNetwork?.rpcUrls?.default?.http?.[0]\n        });\n        if (!res) {\n          return;\n        }\n        StorageUtil.addConnectedNamespace(chainToUse);\n        this.syncProvider({\n          ...res,\n          chainNamespace: chainToUse\n        });\n        await this.syncAccount({\n          ...res,\n          chainNamespace: chainToUse\n        });\n        const {\n          accounts\n        } = await adapter.getAccounts({\n          namespace: chainToUse,\n          id\n        });\n        this.setAllAccounts(accounts, chainToUse);\n      },\n      reconnectExternal: async ({\n        id,\n        info,\n        type,\n        provider\n      }) => {\n        const namespace = ChainController.state.activeChain;\n        const adapter = this.getAdapter(namespace);\n        if (adapter?.reconnect) {\n          await adapter?.reconnect({\n            id,\n            info,\n            type,\n            provider,\n            chainId: this.getCaipNetwork()?.id\n          });\n          StorageUtil.addConnectedNamespace(namespace);\n        }\n      },\n      disconnect: async chainNamespace => {\n        const namespace = chainNamespace || ChainController.state.activeChain;\n        const adapter = this.getAdapter(namespace);\n        const provider = ProviderUtil.getProvider(namespace);\n        const providerType = ProviderUtil.getProviderId(namespace);\n        await adapter?.disconnect({\n          provider,\n          providerType\n        });\n        StorageUtil.removeConnectedNamespace(namespace);\n        ProviderUtil.resetChain(namespace);\n        this.setUser(undefined, namespace);\n        this.setStatus('disconnected', namespace);\n        this.hasSwitchedToPreferredAccountTypeOnConnect = false;\n      },\n      checkInstalled: ids => {\n        if (!ids) {\n          return Boolean(window.ethereum);\n        }\n        return ids.some(id => Boolean(window.ethereum?.[String(id)]));\n      },\n      signMessage: async message => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        const result = await adapter?.signMessage({\n          message,\n          address: AccountController.state.address,\n          provider: ProviderUtil.getProvider(ChainController.state.activeChain)\n        });\n        return result?.signature || '';\n      },\n      sendTransaction: async args => {\n        if (args.chainNamespace === ConstantsUtil.CHAIN.EVM) {\n          const adapter = this.getAdapter(ChainController.state.activeChain);\n          const provider = ProviderUtil.getProvider(ChainController.state.activeChain);\n          const result = await adapter?.sendTransaction({\n            ...args,\n            caipNetwork: this.getCaipNetwork(),\n            provider\n          });\n          return result?.hash || '';\n        }\n        return '';\n      },\n      estimateGas: async args => {\n        if (args.chainNamespace === ConstantsUtil.CHAIN.EVM) {\n          const adapter = this.getAdapter(ChainController.state.activeChain);\n          const provider = ProviderUtil.getProvider(ChainController.state.activeChain);\n          const caipNetwork = this.getCaipNetwork();\n          if (!caipNetwork) {\n            throw new Error('CaipNetwork is undefined');\n          }\n          const result = await adapter?.estimateGas({\n            ...args,\n            provider,\n            caipNetwork\n          });\n          return result?.gas || 0n;\n        }\n        return 0n;\n      },\n      getEnsAvatar: async () => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        const result = await adapter?.getProfile({\n          address: AccountController.state.address,\n          chainId: Number(this.getCaipNetwork()?.id)\n        });\n        return result?.profileImage || false;\n      },\n      getEnsAddress: async name => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        const caipNetwork = this.getCaipNetwork();\n        if (!caipNetwork) {\n          return false;\n        }\n        const result = await adapter?.getEnsAddress({\n          name,\n          caipNetwork\n        });\n        return result?.address || false;\n      },\n      writeContract: async args => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        const caipNetwork = this.getCaipNetwork();\n        const caipAddress = this.getCaipAddress();\n        const provider = ProviderUtil.getProvider(ChainController.state.activeChain);\n        if (!caipNetwork || !caipAddress) {\n          throw new Error('CaipNetwork or CaipAddress is undefined');\n        }\n        const result = await adapter?.writeContract({\n          ...args,\n          caipNetwork,\n          provider,\n          caipAddress\n        });\n        return result?.hash;\n      },\n      parseUnits: (value, decimals) => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        return adapter?.parseUnits({\n          value,\n          decimals\n        }) ?? 0n;\n      },\n      formatUnits: (value, decimals) => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        return adapter?.formatUnits({\n          value,\n          decimals\n        }) ?? '0';\n      },\n      getCapabilities: async params => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        return await adapter?.getCapabilities(params);\n      },\n      grantPermissions: async params => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        return await adapter?.grantPermissions(params);\n      },\n      revokePermissions: async params => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        if (adapter?.revokePermissions) {\n          return await adapter.revokePermissions(params);\n        }\n        return '0x';\n      },\n      walletGetAssets: async params => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        return (await adapter?.walletGetAssets(params)) ?? {};\n      }\n    };\n    this.networkControllerClient = {\n      switchCaipNetwork: async caipNetwork => await this.switchCaipNetwork(caipNetwork),\n      // eslint-disable-next-line @typescript-eslint/require-await\n      getApprovedCaipNetworksData: async () => this.getApprovedCaipNetworksData()\n    };\n    ConnectionController.setClient(this.connectionControllerClient);\n  }\n  getApprovedCaipNetworksData() {\n    const providerType = ProviderUtil.getProviderId(ChainController.state.activeChain);\n    if (providerType === UtilConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT) {\n      const namespaces = this.universalProvider?.session?.namespaces;\n      return {\n        /*\n         * MetaMask Wallet only returns 1 namespace in the session object. This makes it imposible\n         * to switch to other networks. Setting supportsAllNetworks to true for MetaMask Wallet\n         * will make it possible to switch to other networks.\n         */\n        supportsAllNetworks: this.universalProvider?.session?.peer?.metadata.name === 'MetaMask Wallet',\n        approvedCaipNetworkIds: this.getChainsFromNamespaces(namespaces)\n      };\n    }\n    return {\n      supportsAllNetworks: true,\n      approvedCaipNetworkIds: []\n    };\n  }\n  async switchCaipNetwork(caipNetwork) {\n    if (!caipNetwork) {\n      return;\n    }\n    const networkNamespace = caipNetwork.chainNamespace;\n    const namespaceAddress = this.getAddressByChainNamespace(caipNetwork.chainNamespace);\n    if (namespaceAddress) {\n      const provider = ProviderUtil.getProvider(networkNamespace);\n      const providerType = ProviderUtil.getProviderId(networkNamespace);\n      if (caipNetwork.chainNamespace === ChainController.state.activeChain) {\n        const adapter = this.getAdapter(networkNamespace);\n        await adapter?.switchNetwork({\n          caipNetwork,\n          provider,\n          providerType\n        });\n      } else {\n        this.setCaipNetwork(caipNetwork);\n        if (providerType === UtilConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT) {\n          this.syncWalletConnectAccount();\n        } else {\n          const address = this.getAddressByChainNamespace(networkNamespace);\n          if (address) {\n            this.syncAccount({\n              address,\n              chainId: caipNetwork.id,\n              chainNamespace: networkNamespace\n            });\n          }\n        }\n      }\n    } else {\n      this.setCaipNetwork(caipNetwork);\n    }\n  }\n  getChainsFromNamespaces(namespaces = {}) {\n    return Object.values(namespaces).flatMap(namespace => {\n      const chains = namespace.chains || [];\n      const accountsChains = namespace.accounts.map(account => {\n        const {\n          chainId,\n          chainNamespace\n        } = ParseUtil.parseCaipAddress(account);\n        return `${chainNamespace}:${chainId}`;\n      });\n      return Array.from(new Set([...chains, ...accountsChains]));\n    });\n  }\n  // -- Adapter Initialization ---------------------------------------------------\n  createAdapters(blueprints) {\n    this.createClients();\n    return this.chainNamespaces.reduce((adapters, namespace) => {\n      const blueprint = blueprints?.find(b => b.namespace === namespace);\n      if (blueprint) {\n        adapters[namespace] = blueprint;\n        adapters[namespace].namespace = namespace;\n        adapters[namespace].construct({\n          namespace,\n          projectId: this.options?.projectId,\n          networks: this.caipNetworks\n        });\n      } else {\n        adapters[namespace] = new UniversalAdapter({\n          namespace,\n          networks: this.caipNetworks\n        });\n      }\n      return adapters;\n      // eslint-disable-next-line @typescript-eslint/prefer-reduce-type-parameter\n    }, {});\n  }\n  async initChainAdapter(namespace) {\n    this.onConnectors(namespace);\n    this.listenAdapter(namespace);\n    this.chainAdapters?.[namespace].syncConnectors(this.options, this);\n    await this.createUniversalProviderForAdapter(namespace);\n  }\n  async initChainAdapters() {\n    await Promise.all(this.chainNamespaces.map(async namespace => {\n      await this.initChainAdapter(namespace);\n    }));\n  }\n  onConnectors(chainNamespace) {\n    const adapter = this.getAdapter(chainNamespace);\n    adapter?.on('connectors', this.setConnectors.bind(this));\n  }\n  listenAdapter(chainNamespace) {\n    const adapter = this.getAdapter(chainNamespace);\n    if (!adapter) {\n      return;\n    }\n    const connectionStatus = StorageUtil.getConnectionStatus();\n    if (connectionStatus === 'connected') {\n      this.setStatus('connecting', chainNamespace);\n    } else if (connectionStatus === 'disconnected') {\n      /*\n       * Address cache is kept after disconnecting from the wallet\n       * but should be cleared if appkit is launched in disconnected state\n       */\n      StorageUtil.clearAddressCache();\n      this.setStatus(connectionStatus, chainNamespace);\n    } else {\n      this.setStatus(connectionStatus, chainNamespace);\n    }\n    adapter.on('switchNetwork', ({\n      address,\n      chainId\n    }) => {\n      const caipNetwork = this.caipNetworks?.find(n => n.id === chainId || n.caipNetworkId === chainId);\n      const isSameNamespace = ChainController.state.activeChain === chainNamespace;\n      const accountAddress = ChainController.getAccountProp('address', chainNamespace);\n      if (caipNetwork) {\n        const account = isSameNamespace && address ? address : accountAddress;\n        if (account) {\n          this.syncAccount({\n            address: account,\n            chainId,\n            chainNamespace\n          });\n        }\n      } else {\n        this.setUnsupportedNetwork(chainId);\n      }\n    });\n    adapter.on('disconnect', this.disconnect.bind(this, chainNamespace));\n    adapter.on('pendingTransactions', () => {\n      const address = AccountController.state.address;\n      const activeCaipNetwork = ChainController.state.activeCaipNetwork;\n      if (!address || !activeCaipNetwork?.id) {\n        return;\n      }\n      this.updateNativeBalance(address, activeCaipNetwork.id, activeCaipNetwork.chainNamespace);\n    });\n    adapter.on('accountChanged', ({\n      address,\n      chainId\n    }) => {\n      const isActiveChain = ChainController.state.activeChain === chainNamespace;\n      if (isActiveChain && chainId) {\n        this.syncAccount({\n          address,\n          chainId,\n          chainNamespace\n        });\n      } else if (isActiveChain && ChainController.state.activeCaipNetwork?.id) {\n        this.syncAccount({\n          address,\n          chainId: ChainController.state.activeCaipNetwork?.id,\n          chainNamespace\n        });\n      } else {\n        this.syncAccountInfo(address, chainId, chainNamespace);\n      }\n    });\n  }\n  async createUniversalProviderForAdapter(chainNamespace) {\n    await this.getUniversalProvider();\n    if (this.universalProvider) {\n      this.chainAdapters?.[chainNamespace]?.setUniversalProvider?.(this.universalProvider);\n    }\n  }\n  // -- Connection Sync ---------------------------------------------------\n  async syncExistingConnection() {\n    await Promise.allSettled(this.chainNamespaces.map(namespace => this.syncNamespaceConnection(namespace)));\n  }\n  async syncNamespaceConnection(namespace) {\n    try {\n      const connectorId = ConnectorController.getConnectorId(namespace);\n      this.setStatus('connecting', namespace);\n      switch (connectorId) {\n        case ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT:\n          await this.syncWalletConnectAccount();\n          break;\n        case ConstantsUtil.CONNECTOR_ID.AUTH:\n          // Handled during initialization of adapters' auth provider\n          break;\n        default:\n          await this.syncAdapterConnection(namespace);\n      }\n    } catch (err) {\n      console.warn(\"AppKit couldn't sync existing connection\", err);\n      this.setStatus('disconnected', namespace);\n    }\n  }\n  async syncAdapterConnection(namespace) {\n    const adapter = this.getAdapter(namespace);\n    const connectorId = ConnectorController.getConnectorId(namespace);\n    const caipNetwork = this.getCaipNetwork(namespace);\n    const connector = ConnectorController.getConnectors(namespace).find(c => c.id === connectorId);\n    try {\n      if (!adapter || !connector) {\n        throw new Error(`Adapter or connector not found for namespace ${namespace}`);\n      }\n      if (!caipNetwork?.id) {\n        throw new Error('CaipNetwork not found');\n      }\n      const connection = await adapter?.syncConnection({\n        namespace,\n        id: connector.id,\n        chainId: caipNetwork.id,\n        rpcUrl: caipNetwork?.rpcUrls?.default?.http?.[0]\n      });\n      if (connection) {\n        const accounts = await adapter?.getAccounts({\n          namespace,\n          id: connector.id\n        });\n        if (accounts && accounts.accounts.length > 0) {\n          this.setAllAccounts(accounts.accounts, namespace);\n        } else {\n          this.setAllAccounts([CoreHelperUtil.createAccount(namespace, connection.address, 'eoa')], namespace);\n        }\n        this.syncProvider({\n          ...connection,\n          chainNamespace: namespace\n        });\n        await this.syncAccount({\n          ...connection,\n          chainNamespace: namespace\n        });\n        this.setStatus('connected', namespace);\n      } else {\n        this.setStatus('disconnected', namespace);\n      }\n    } catch (e) {\n      this.setStatus('disconnected', namespace);\n    }\n  }\n  async syncWalletConnectAccount() {\n    const syncTasks = this.chainNamespaces.map(async chainNamespace => {\n      const adapter = this.getAdapter(chainNamespace);\n      const namespaceAccounts = this.universalProvider?.session?.namespaces?.[chainNamespace]?.accounts || [];\n      // We try and find the address for this network in the session object.\n      const activeChainId = ChainController.state.activeCaipNetwork?.id;\n      const sessionAddress = namespaceAccounts.find(account => {\n        const {\n          chainId\n        } = ParseUtil.parseCaipAddress(account);\n        return chainId === activeChainId?.toString();\n      }) || namespaceAccounts[0];\n      if (sessionAddress) {\n        const caipAddress = ParseUtil.validateCaipAddress(sessionAddress);\n        const {\n          chainId,\n          address\n        } = ParseUtil.parseCaipAddress(caipAddress);\n        ProviderUtil.setProviderId(chainNamespace, UtilConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT);\n        if (this.caipNetworks && ChainController.state.activeCaipNetwork && adapter?.namespace !== ConstantsUtil.CHAIN.EVM) {\n          const provider = adapter?.getWalletConnectProvider({\n            caipNetworks: this.caipNetworks,\n            provider: this.universalProvider,\n            activeCaipNetwork: ChainController.state.activeCaipNetwork\n          });\n          ProviderUtil.setProvider(chainNamespace, provider);\n        } else {\n          ProviderUtil.setProvider(chainNamespace, this.universalProvider);\n        }\n        ConnectorController.setConnectorId(ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT, chainNamespace);\n        StorageUtil.addConnectedNamespace(chainNamespace);\n        this.syncWalletConnectAccounts(chainNamespace);\n        await this.syncAccount({\n          address,\n          chainId,\n          chainNamespace\n        });\n      } else {\n        this.setStatus('disconnected', chainNamespace);\n      }\n      await ChainController.setApprovedCaipNetworksData(chainNamespace);\n    });\n    await Promise.all(syncTasks);\n  }\n  syncWalletConnectAccounts(chainNamespace) {\n    const addresses = this.universalProvider?.session?.namespaces?.[chainNamespace]?.accounts?.map(account => {\n      const {\n        address\n      } = ParseUtil.parseCaipAddress(account);\n      return address;\n    }).filter((address, index, self) => self.indexOf(address) === index);\n    if (addresses) {\n      this.setAllAccounts(addresses.map(address => CoreHelperUtil.createAccount(chainNamespace, address, chainNamespace === 'bip122' ? 'payment' : 'eoa')), chainNamespace);\n    }\n  }\n  syncProvider({\n    type,\n    provider,\n    id,\n    chainNamespace\n  }) {\n    ProviderUtil.setProviderId(chainNamespace, type);\n    ProviderUtil.setProvider(chainNamespace, provider);\n    ConnectorController.setConnectorId(id, chainNamespace);\n  }\n  async syncAccount(params) {\n    const isActiveNamespace = params.chainNamespace === ChainController.state.activeChain;\n    const networkOfChain = ChainController.getCaipNetworkByNamespace(params.chainNamespace, params.chainId);\n    const {\n      address,\n      chainId,\n      chainNamespace\n    } = params;\n    const {\n      chainId: activeChainId\n    } = StorageUtil.getActiveNetworkProps();\n    const chainIdToUse = chainId || activeChainId;\n    const isUnsupportedNetwork = ChainController.state.activeCaipNetwork?.name === ConstantsUtil.UNSUPPORTED_NETWORK_NAME;\n    const shouldSupportAllNetworks = ChainController.getNetworkProp('supportsAllNetworks', chainNamespace);\n    this.setStatus('connected', chainNamespace);\n    if (isUnsupportedNetwork && !shouldSupportAllNetworks) {\n      return;\n    }\n    if (chainIdToUse) {\n      let caipNetwork = this.caipNetworks?.find(n => n.id.toString() === chainIdToUse.toString());\n      let fallbackCaipNetwork = this.caipNetworks?.find(n => n.chainNamespace === chainNamespace);\n      // If doesn't support all networks, we need to use approved networks\n      if (!shouldSupportAllNetworks && !caipNetwork && !fallbackCaipNetwork) {\n        // Connection can be requested for a chain that is not supported by the wallet so we need to use approved networks here\n        const caipNetworkIds = this.getApprovedCaipNetworkIds() || [];\n        const caipNetworkId = caipNetworkIds.find(id => ParseUtil.parseCaipNetworkId(id)?.chainId === chainIdToUse.toString());\n        const fallBackCaipNetworkId = caipNetworkIds.find(id => ParseUtil.parseCaipNetworkId(id)?.chainNamespace === chainNamespace);\n        caipNetwork = this.caipNetworks?.find(n => n.caipNetworkId === caipNetworkId);\n        fallbackCaipNetwork = this.caipNetworks?.find(n => n.caipNetworkId === fallBackCaipNetworkId ||\n        // This is a workaround used in Solana network to support deprecated caipNetworkId\n        'deprecatedCaipNetworkId' in n && n.deprecatedCaipNetworkId === fallBackCaipNetworkId);\n      }\n      const network = caipNetwork || fallbackCaipNetwork;\n      if (network?.chainNamespace === ChainController.state.activeChain) {\n        // If the network is unsupported and the user doesn't allow unsupported chains, we show the unsupported chain UI\n        if (OptionsController.state.enableNetworkSwitch && !OptionsController.state.allowUnsupportedChain && ChainController.state.activeCaipNetwork?.name === ConstantsUtil.UNSUPPORTED_NETWORK_NAME) {\n          ChainController.showUnsupportedChainUI();\n        } else {\n          this.setCaipNetwork(network);\n        }\n      } else if (!isActiveNamespace) {\n        if (networkOfChain) {\n          this.setCaipNetworkOfNamespace(networkOfChain, chainNamespace);\n        }\n      }\n      this.syncConnectedWalletInfo(chainNamespace);\n      if (!HelpersUtil.isLowerCaseMatch(address, AccountController.state.address)) {\n        this.syncAccountInfo(address, network?.id, chainNamespace);\n      }\n      if (isActiveNamespace) {\n        await this.syncBalance({\n          address,\n          chainId: network?.id,\n          chainNamespace\n        });\n      } else {\n        await this.syncBalance({\n          address,\n          chainId: networkOfChain?.id,\n          chainNamespace\n        });\n      }\n    }\n  }\n  async syncAccountInfo(address, chainId, chainNamespace) {\n    const caipAddress = this.getCaipAddress(chainNamespace);\n    const newChainId = chainId || caipAddress?.split(':')[1];\n    if (!newChainId) {\n      return;\n    }\n    const newCaipAddress = `${chainNamespace}:${newChainId}:${address}`;\n    this.setCaipAddress(newCaipAddress, chainNamespace);\n    await this.syncIdentity({\n      address,\n      chainId: newChainId,\n      chainNamespace\n    });\n  }\n  async syncReownName(address, chainNamespace) {\n    try {\n      const registeredWcNames = await this.getReownName(address);\n      if (registeredWcNames[0]) {\n        const wcName = registeredWcNames[0];\n        this.setProfileName(wcName.name, chainNamespace);\n      } else {\n        this.setProfileName(null, chainNamespace);\n      }\n    } catch {\n      this.setProfileName(null, chainNamespace);\n    }\n  }\n  syncConnectedWalletInfo(chainNamespace) {\n    const connectorId = ConnectorController.getConnectorId(chainNamespace);\n    const providerType = ProviderUtil.getProviderId(chainNamespace);\n    if (providerType === UtilConstantsUtil.CONNECTOR_TYPE_ANNOUNCED || providerType === UtilConstantsUtil.CONNECTOR_TYPE_INJECTED) {\n      if (connectorId) {\n        const connector = this.getConnectors().find(c => c.id === connectorId);\n        if (connector) {\n          const {\n            info,\n            name,\n            imageUrl\n          } = connector;\n          const icon = imageUrl || this.getConnectorImage(connector);\n          this.setConnectedWalletInfo({\n            name,\n            icon,\n            ...info\n          }, chainNamespace);\n        }\n      }\n    } else if (providerType === UtilConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT) {\n      const provider = ProviderUtil.getProvider(chainNamespace);\n      if (provider?.session) {\n        this.setConnectedWalletInfo({\n          ...provider.session.peer.metadata,\n          name: provider.session.peer.metadata.name,\n          icon: provider.session.peer.metadata.icons?.[0]\n        }, chainNamespace);\n      }\n    } else if (connectorId) {\n      if (connectorId === ConstantsUtil.CONNECTOR_ID.COINBASE) {\n        const connector = this.getConnectors().find(c => c.id === ConstantsUtil.CONNECTOR_ID.COINBASE);\n        this.setConnectedWalletInfo({\n          name: 'Coinbase Wallet',\n          icon: this.getConnectorImage(connector)\n        }, chainNamespace);\n      } else {\n        this.setConnectedWalletInfo({\n          name: connectorId\n        }, chainNamespace);\n      }\n    }\n  }\n  async syncBalance(params) {\n    const caipNetwork = NetworkUtil.getNetworksByNamespace(this.caipNetworks, params.chainNamespace).find(n => n.id.toString() === params.chainId?.toString());\n    if (!caipNetwork || !params.chainId) {\n      return;\n    }\n    await this.updateNativeBalance(params.address, params.chainId, params.chainNamespace);\n  }\n  async updateNativeBalance(address, chainId, namespace) {\n    const adapter = this.getAdapter(namespace);\n    if (adapter) {\n      const balance = await adapter.getBalance({\n        address,\n        chainId,\n        caipNetwork: this.getCaipNetwork(namespace),\n        tokens: this.options.tokens\n      });\n      this.setBalance(balance.balance, balance.symbol, namespace);\n    }\n  }\n  // -- Universal Provider ---------------------------------------------------\n  async initializeUniversalAdapter() {\n    const logger = LoggerUtil.createLogger((error, ...args) => {\n      if (error) {\n        this.handleAlertError(error);\n      }\n      // eslint-disable-next-line no-console\n      console.error(...args);\n    });\n    const universalProviderOptions = {\n      projectId: this.options?.projectId,\n      metadata: {\n        name: this.options?.metadata ? this.options?.metadata.name : '',\n        description: this.options?.metadata ? this.options?.metadata.description : '',\n        url: this.options?.metadata ? this.options?.metadata.url : '',\n        icons: this.options?.metadata ? this.options?.metadata.icons : ['']\n      },\n      logger\n    };\n    OptionsController.setManualWCControl(Boolean(this.options?.manualWCControl));\n    this.universalProvider = this.options.universalProvider ?? (await UniversalProvider.init(universalProviderOptions));\n    this.listenWalletConnect();\n  }\n  listenWalletConnect() {\n    if (this.universalProvider) {\n      this.universalProvider.on('display_uri', uri => {\n        ConnectionController.setUri(uri);\n      });\n      this.universalProvider.on('connect', ConnectionController.finalizeWcConnection);\n      this.universalProvider.on('disconnect', () => {\n        this.chainNamespaces.forEach(namespace => {\n          this.resetAccount(namespace);\n        });\n        ConnectionController.resetWcConnection();\n      });\n      this.universalProvider.on('chainChanged', chainId => {\n        // eslint-disable-next-line eqeqeq\n        const caipNetwork = this.caipNetworks?.find(c => c.id == chainId);\n        const currentCaipNetwork = this.getCaipNetwork();\n        if (!caipNetwork) {\n          this.setUnsupportedNetwork(chainId);\n          return;\n        }\n        if (currentCaipNetwork?.id !== caipNetwork?.id) {\n          this.setCaipNetwork(caipNetwork);\n        }\n      });\n      this.universalProvider.on('session_event', callbackData => {\n        if (WcHelpersUtil.isSessionEventData(callbackData)) {\n          const {\n            name,\n            data\n          } = callbackData.params.event;\n          if (name === 'accountsChanged' && Array.isArray(data) && CoreHelperUtil.isCaipAddress(data[0])) {\n            this.syncAccount(ParseUtil.parseCaipAddress(data[0]));\n          }\n        }\n      });\n    }\n  }\n  createUniversalProvider() {\n    if (!this.universalProviderInitPromise && CoreHelperUtil.isClient() && this.options?.projectId) {\n      this.universalProviderInitPromise = this.initializeUniversalAdapter();\n    }\n    return this.universalProviderInitPromise;\n  }\n  async getUniversalProvider() {\n    if (!this.universalProvider) {\n      try {\n        await this.createUniversalProvider();\n      } catch (err) {\n        EventsController.sendEvent({\n          type: 'error',\n          event: 'INTERNAL_SDK_ERROR',\n          properties: {\n            errorType: 'UniversalProviderInitError',\n            errorMessage: err instanceof Error ? err.message : 'Unknown',\n            uncaught: false\n          }\n        });\n        // eslint-disable-next-line no-console\n        console.error('AppKit:getUniversalProvider - Cannot create provider', err);\n      }\n    }\n    return this.universalProvider;\n  }\n  // - Utils -------------------------------------------------------------------\n  handleAlertError(error) {\n    const matchedUniversalProviderError = Object.entries(ErrorUtil.UniversalProviderErrors).find(([, {\n      message\n    }]) => error.message.includes(message));\n    const [errorKey, errorValue] = matchedUniversalProviderError ?? [];\n    const {\n      message,\n      alertErrorKey\n    } = errorValue ?? {};\n    if (errorKey && message && !this.reportedAlertErrors[errorKey]) {\n      const alertError = ErrorUtil.ALERT_ERRORS[alertErrorKey];\n      if (alertError) {\n        AlertController.open(alertError, 'error');\n        this.reportedAlertErrors[errorKey] = true;\n      }\n    }\n  }\n  getAdapter(namespace) {\n    if (!namespace) {\n      return undefined;\n    }\n    return this.chainAdapters?.[namespace];\n  }\n  createAdapter(blueprint) {\n    if (!blueprint) {\n      return;\n    }\n    const namespace = blueprint.namespace;\n    if (!namespace) {\n      return;\n    }\n    this.createClients();\n    const adapterBlueprint = blueprint;\n    adapterBlueprint.namespace = namespace;\n    adapterBlueprint.construct({\n      namespace,\n      projectId: this.options?.projectId,\n      networks: this.caipNetworks\n    });\n    if (!this.chainNamespaces.includes(namespace)) {\n      this.chainNamespaces.push(namespace);\n    }\n    if (this.chainAdapters) {\n      this.chainAdapters[namespace] = adapterBlueprint;\n    }\n  }\n  // -- Public -------------------------------------------------------------------\n  async open(options) {\n    await this.injectModalUi();\n    if (options?.uri) {\n      ConnectionController.setUri(options.uri);\n    }\n    await ModalController.open(options);\n  }\n  async close() {\n    await this.injectModalUi();\n    ModalController.close();\n  }\n  setLoading(loading, namespace) {\n    ModalController.setLoading(loading, namespace);\n  }\n  async disconnect(chainNamespace) {\n    await ConnectionController.disconnect(chainNamespace);\n  }\n  // -- review these -------------------------------------------------------------------\n  getError() {\n    return '';\n  }\n  getChainId() {\n    return ChainController.state.activeCaipNetwork?.id;\n  }\n  async switchNetwork(appKitNetwork) {\n    const network = this.caipNetworks?.find(n => n.id === appKitNetwork.id);\n    if (!network) {\n      AlertController.open(ErrorUtil.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND, 'error');\n      return;\n    }\n    await ChainController.switchActiveNetwork(network);\n  }\n  getWalletProvider() {\n    return ChainController.state.activeChain ? ProviderUtil.state.providers[ChainController.state.activeChain] : null;\n  }\n  getWalletProviderType() {\n    return ProviderUtil.getProviderId(ChainController.state.activeChain);\n  }\n  subscribeProviders(callback) {\n    return ProviderUtil.subscribeProviders(callback);\n  }\n  getThemeMode() {\n    return ThemeController.state.themeMode;\n  }\n  getThemeVariables() {\n    return ThemeController.state.themeVariables;\n  }\n  setThemeMode(themeMode) {\n    ThemeController.setThemeMode(themeMode);\n    setColorTheme(ThemeController.state.themeMode);\n  }\n  setTermsConditionsUrl(termsConditionsUrl) {\n    OptionsController.setTermsConditionsUrl(termsConditionsUrl);\n  }\n  setPrivacyPolicyUrl(privacyPolicyUrl) {\n    OptionsController.setPrivacyPolicyUrl(privacyPolicyUrl);\n  }\n  setThemeVariables(themeVariables) {\n    ThemeController.setThemeVariables(themeVariables);\n    setThemeVariables(ThemeController.state.themeVariables);\n  }\n  subscribeTheme(callback) {\n    return ThemeController.subscribe(callback);\n  }\n  getWalletInfo() {\n    return AccountController.state.connectedWalletInfo;\n  }\n  getAccount(namespace) {\n    const authConnector = ConnectorController.getAuthConnector(namespace);\n    const accountState = ChainController.getAccountData(namespace);\n    if (!accountState) {\n      return undefined;\n    }\n    return {\n      allAccounts: accountState.allAccounts,\n      caipAddress: accountState.caipAddress,\n      address: CoreHelperUtil.getPlainAddress(accountState.caipAddress),\n      isConnected: Boolean(accountState.caipAddress),\n      status: accountState.status,\n      embeddedWalletInfo: authConnector ? {\n        user: accountState.user,\n        authProvider: accountState.socialProvider || 'email',\n        accountType: accountState.preferredAccountType,\n        isSmartAccountDeployed: Boolean(accountState.smartAccountDeployed)\n      } : undefined\n    };\n  }\n  subscribeAccount(callback, namespace) {\n    const updateVal = () => {\n      const account = this.getAccount(namespace);\n      if (!account) {\n        return;\n      }\n      callback(account);\n    };\n    if (namespace) {\n      ChainController.subscribeChainProp('accountState', updateVal, namespace);\n    } else {\n      ChainController.subscribe(updateVal);\n    }\n    ConnectorController.subscribe(updateVal);\n  }\n  subscribeNetwork(callback) {\n    return ChainController.subscribe(({\n      activeCaipNetwork\n    }) => {\n      callback({\n        caipNetwork: activeCaipNetwork,\n        chainId: activeCaipNetwork?.id,\n        caipNetworkId: activeCaipNetwork?.caipNetworkId\n      });\n    });\n  }\n  subscribeWalletInfo(callback) {\n    return AccountController.subscribeKey('connectedWalletInfo', callback);\n  }\n  subscribeShouldUpdateToAddress(callback) {\n    AccountController.subscribeKey('shouldUpdateToAddress', callback);\n  }\n  subscribeCaipNetworkChange(callback) {\n    ChainController.subscribeKey('activeCaipNetwork', callback);\n  }\n  getState() {\n    return PublicStateController.state;\n  }\n  subscribeState(callback) {\n    return PublicStateController.subscribe(callback);\n  }\n  showErrorMessage(message) {\n    SnackController.showError(message);\n  }\n  showSuccessMessage(message) {\n    SnackController.showSuccess(message);\n  }\n  getEvent() {\n    return {\n      ...EventsController.state\n    };\n  }\n  subscribeEvents(callback) {\n    return EventsController.subscribe(callback);\n  }\n  replace(route) {\n    RouterController.replace(route);\n  }\n  redirect(route) {\n    RouterController.push(route);\n  }\n  popTransactionStack(cancel) {\n    RouterController.popTransactionStack(cancel);\n  }\n  isOpen() {\n    return ModalController.state.open;\n  }\n  isTransactionStackEmpty() {\n    return RouterController.state.transactionStack.length === 0;\n  }\n  isTransactionShouldReplaceView() {\n    return RouterController.state.transactionStack[RouterController.state.transactionStack.length - 1]?.replace;\n  }\n  static getInstance() {\n    return this.instance;\n  }\n  updateFeatures(newFeatures) {\n    OptionsController.setFeatures(newFeatures);\n  }\n  updateOptions(newOptions) {\n    const currentOptions = OptionsController.state || {};\n    const updatedOptions = {\n      ...currentOptions,\n      ...newOptions\n    };\n    OptionsController.setOptions(updatedOptions);\n  }\n  setConnectMethodsOrder(connectMethodsOrder) {\n    OptionsController.setConnectMethodsOrder(connectMethodsOrder);\n  }\n  setWalletFeaturesOrder(walletFeaturesOrder) {\n    OptionsController.setWalletFeaturesOrder(walletFeaturesOrder);\n  }\n  setCollapseWallets(collapseWallets) {\n    OptionsController.setCollapseWallets(collapseWallets);\n  }\n  setSocialsOrder(socialsOrder) {\n    OptionsController.setSocialsOrder(socialsOrder);\n  }\n  getConnectMethodsOrder() {\n    return WalletUtil.getConnectOrderMethod(OptionsController.state.features, ConnectorController.getConnectors());\n  }\n  /**\n   * Removes an adapter from the AppKit.\n   * @param namespace - The namespace of the adapter to remove.\n   */\n  removeAdapter(namespace) {\n    const isConnected = this.getIsConnectedState();\n    const adapter = this.getAdapter(namespace);\n    if (!adapter || !this.chainAdapters || isConnected) {\n      return;\n    }\n    const newCaipNetworks = this.caipNetworks?.filter(network => network.chainNamespace !== namespace);\n    ChainController.removeAdapter(namespace);\n    ConnectorController.removeAdapter(namespace);\n    this.chainNamespaces = this.chainNamespaces.filter(n => n !== namespace);\n    this.caipNetworks = newCaipNetworks;\n    adapter.removeAllEventListeners();\n    Reflect.deleteProperty(this.chainAdapters, namespace);\n  }\n  /**\n   * Adds an adapter to the AppKit.\n   * @param adapter - The adapter instance.\n   * @param networks - The list of networks that this adapter supports / uses.\n   */\n  addAdapter(adapter, networks) {\n    const namespace = adapter.namespace;\n    if (!this.connectionControllerClient || !this.networkControllerClient) {\n      return;\n    }\n    if (!this.chainAdapters || !namespace) {\n      return;\n    }\n    const extendedAdapterNetworks = this.extendCaipNetworks({\n      ...this.options,\n      networks\n    });\n    this.caipNetworks = [...(this.caipNetworks || []), ...extendedAdapterNetworks];\n    this.createAdapter(adapter);\n    this.initChainAdapter(namespace);\n    ChainController.addAdapter(adapter, {\n      connectionControllerClient: this.connectionControllerClient,\n      networkControllerClient: this.networkControllerClient\n    }, extendedAdapterNetworks);\n  }\n  /**\n   * Adds a network to an existing adapter in AppKit.\n   * @param namespace - The chain namespace to add the network to (e.g. 'eip155', 'solana')\n   * @param network - The network configuration to add\n   * @throws Error if adapter for namespace doesn't exist\n   */\n  addNetwork(namespace, network) {\n    if (this.chainAdapters && !this.chainAdapters[namespace]) {\n      throw new Error(`Adapter for namespace ${namespace} doesn't exist`);\n    }\n    const extendedNetwork = this.extendCaipNetwork(network, this.options);\n    ChainController.addNetwork(extendedNetwork);\n    if (this.caipNetworks && !this.caipNetworks?.find(n => n.id === extendedNetwork.id)) {\n      this.caipNetworks.push(extendedNetwork);\n    }\n  }\n  /**\n   * Removes a network from an existing adapter in AppKit.\n   * @param namespace - The chain namespace the network belongs to\n   * @param networkId - The network ID to remove\n   * @throws Error if adapter for namespace doesn't exist or if removing last network\n   */\n  removeNetwork(namespace, networkId) {\n    if (this.chainAdapters && !this.chainAdapters[namespace]) {\n      throw new Error(`Adapter for namespace ${namespace} doesn't exist`);\n    }\n    const networkToRemove = this.caipNetworks?.find(n => n.id === networkId);\n    if (!networkToRemove) {\n      throw new Error(`Network with ID ${networkId} not found`);\n    }\n    if (!this.caipNetworks) {\n      return;\n    }\n    const remainingNetworks = this.caipNetworks.filter(n => n.chainNamespace === namespace && n.id !== networkId);\n    if (!remainingNetworks?.length) {\n      throw new Error('Cannot remove last network for a namespace');\n    }\n    ChainController.removeNetwork(namespace, networkId);\n    this.caipNetworks = [...remainingNetworks];\n  }\n}","map":{"version":3,"names":["UniversalProvider","ConstantsUtil","NetworkUtil","ParseUtil","AccountController","AlertController","AssetUtil","BlockchainApiController","ChainController","ConnectionController","ConnectorController","CoreHelperUtil","EnsController","EventsController","ModalController","OptionsController","PublicStateController","RouterController","SnackController","StorageUtil","ThemeController","WalletUtil","setColorTheme","setThemeVariables","CaipNetworksUtil","ErrorUtil","HelpersUtil","LoggerUtil","UtilConstantsUtil","ProviderUtil","UniversalAdapter","WcHelpersUtil","AppKitBaseClient","constructor","options","hasSwitchedToPreferredAccountTypeOnConnect","chainNamespaces","reportedAlertErrors","getCaipNetwork","chainNamespace","namespaceCaipNetwork","getNetworkData","caipNetwork","getRequestedCaipNetworks","filter","c","state","activeCaipNetwork","defaultCaipNetwork","getCaipNetworkId","network","id","undefined","getCaipNetworks","namespace","getActiveChainNamespace","activeChain","setRequestedCaipNetworks","requestedCaipNetworks","chain","getApprovedCaipNetworkIds","getAllApprovedCaipNetworkIds","getCaipAddress","activeCaipAddress","getAccountProp","setClientId","clientId","getProvider","getProviderType","getProviderId","getPreferredAccountType","preferredAccountType","setCaipAddress","caipAddress","setBalance","balance","balanceSymbol","setProfileName","profileName","setProfileImage","profileImage","setUser","user","enableEmbedded","close","resetAccount","setCaipNetwork","setActiveCaipNetwork","setCaipNetworkOfNamespace","setChainNetworkData","setAllAccounts","addresses","setHasMultipleAddresses","length","setStatus","status","isConnected","setConnectionStatus","getAddressByChainNamespace","setConnectors","connectors","allConnectors","getConnectors","fetchIdentity","request","getReownName","address","getNamesForAddress","getConnectorImage","connector","setConnectedWalletInfo","connectedWalletInfo","type","walletInfo","getIsConnectedState","Boolean","addAddressLabel","label","removeAddressLabel","getAddress","setApprovedCaipNetworksData","resetNetwork","addConnector","resetWcConnection","setAddressExplorerUrl","addressExplorerUrl","setSmartAccountDeployed","isDeployed","setSmartAccountEnabledNetworks","smartAccountEnabledNetworks","setPreferredAccountType","setEIP6963Enabled","enabled","handleUnsafeRPCRequest","isOpen","isTransactionStackEmpty","redirect","open","view","version","sdkVersion","caipNetworks","extendCaipNetworks","Set","map","extendDefaultCaipNetwork","chainAdapters","createAdapters","adapters","initialize","sendInitializeEvent","initControllers","initChainAdapters","injectModalUi","syncExistingConnection","set","initialized","optionsCopy","sendEvent","event","properties","networks","n","siweConfig","initializeOptionsController","initializeChainController","initializeThemeController","initializeConnectionController","initializeConnectorController","themeMode","setThemeMode","themeVariables","connectionControllerClient","networkControllerClient","Error","getDefaultNetwork","setWcBasic","basic","setDebug","debug","setEnableWalletConnect","enableWalletConnect","setEnableWalletGuide","enableWalletGuide","setEnableWallets","enableWallets","enableEIP6963","setEnableNetworkSwitch","enableNetworkSwitch","setEnableAuthLogger","enableAuthLogger","setCustomRpcUrls","customRpcUrls","setSdkVersion","setProjectId","projectId","setEnableEmbedded","setAllWallets","allWallets","setIncludeWalletIds","includeWalletIds","setExcludeWalletIds","excludeWalletIds","setFeaturedWalletIds","featuredWalletIds","setTokens","tokens","setTermsConditionsUrl","termsConditionsUrl","setPrivacyPolicyUrl","privacyPolicyUrl","setCustomWallets","customWallets","setFeatures","features","setAllowUnsupportedChain","allowUnsupportedChain","setDefaultAccountTypes","defaultAccountTypes","setUniversalProviderConfigOverride","universalProviderConfigOverride","defaultMetaData","getDefaultMetaData","metadata","setMetadata","setDisableAppend","disableAppend","setSIWX","siwx","ALERT_ERRORS","PROJECT_ID_NOT_CONFIGURED","evmAdapter","find","adapter","CHAIN","EVM","mapToSIWX","window","document","name","getElementsByTagName","textContent","description","querySelector","content","url","location","origin","icons","href","setUnsupportedNetwork","chainId","unsupportedNetwork","getUnsupportedNetwork","getCaipNetworkFromStorage","extendCaipNetwork","extendedNetwork","customNetworkImageUrls","chainImages","extendedNetworks","defaultNetwork","createClients","connectWalletConnect","getAdapter","result","setConnectedNamespaces","chains","keys","forEach","setConnectorId","CONNECTOR_TYPE_WALLET_CONNECT","syncWalletConnectAccount","connectExternal","info","provider","chainToUse","toConnectNetwork","fallbackCaipNetwork","res","connect","rpcUrl","rpcUrls","default","http","addConnectedNamespace","syncProvider","syncAccount","accounts","getAccounts","reconnectExternal","reconnect","disconnect","providerType","removeConnectedNamespace","resetChain","checkInstalled","ids","ethereum","some","String","signMessage","message","signature","sendTransaction","args","hash","estimateGas","gas","getEnsAvatar","getProfile","Number","getEnsAddress","writeContract","parseUnits","value","decimals","formatUnits","getCapabilities","params","grantPermissions","revokePermissions","walletGetAssets","switchCaipNetwork","getApprovedCaipNetworksData","setClient","namespaces","universalProvider","session","supportsAllNetworks","peer","approvedCaipNetworkIds","getChainsFromNamespaces","networkNamespace","namespaceAddress","switchNetwork","Object","values","flatMap","accountsChains","account","parseCaipAddress","Array","from","blueprints","reduce","blueprint","b","construct","initChainAdapter","onConnectors","listenAdapter","syncConnectors","createUniversalProviderForAdapter","Promise","all","on","bind","connectionStatus","getConnectionStatus","clearAddressCache","caipNetworkId","isSameNamespace","accountAddress","updateNativeBalance","isActiveChain","syncAccountInfo","getUniversalProvider","setUniversalProvider","allSettled","syncNamespaceConnection","connectorId","getConnectorId","CONNECTOR_ID","WALLET_CONNECT","AUTH","syncAdapterConnection","err","console","warn","connection","syncConnection","createAccount","e","syncTasks","namespaceAccounts","activeChainId","sessionAddress","toString","validateCaipAddress","setProviderId","getWalletConnectProvider","setProvider","syncWalletConnectAccounts","index","self","indexOf","isActiveNamespace","networkOfChain","getCaipNetworkByNamespace","getActiveNetworkProps","chainIdToUse","isUnsupportedNetwork","UNSUPPORTED_NETWORK_NAME","shouldSupportAllNetworks","getNetworkProp","caipNetworkIds","parseCaipNetworkId","fallBackCaipNetworkId","deprecatedCaipNetworkId","showUnsupportedChainUI","syncConnectedWalletInfo","isLowerCaseMatch","syncBalance","newChainId","split","newCaipAddress","syncIdentity","syncReownName","registeredWcNames","wcName","CONNECTOR_TYPE_ANNOUNCED","CONNECTOR_TYPE_INJECTED","imageUrl","icon","COINBASE","getNetworksByNamespace","getBalance","symbol","initializeUniversalAdapter","logger","createLogger","error","handleAlertError","universalProviderOptions","setManualWCControl","manualWCControl","init","listenWalletConnect","uri","setUri","finalizeWcConnection","currentCaipNetwork","callbackData","isSessionEventData","data","isArray","isCaipAddress","createUniversalProvider","universalProviderInitPromise","isClient","errorType","errorMessage","uncaught","matchedUniversalProviderError","entries","UniversalProviderErrors","includes","errorKey","errorValue","alertErrorKey","alertError","createAdapter","adapterBlueprint","push","setLoading","loading","getError","getChainId","appKitNetwork","SWITCH_NETWORK_NOT_FOUND","switchActiveNetwork","getWalletProvider","providers","getWalletProviderType","subscribeProviders","callback","getThemeMode","getThemeVariables","subscribeTheme","subscribe","getWalletInfo","getAccount","authConnector","getAuthConnector","accountState","getAccountData","allAccounts","getPlainAddress","embeddedWalletInfo","authProvider","socialProvider","accountType","isSmartAccountDeployed","smartAccountDeployed","subscribeAccount","updateVal","subscribeChainProp","subscribeNetwork","subscribeWalletInfo","subscribeKey","subscribeShouldUpdateToAddress","subscribeCaipNetworkChange","getState","subscribeState","showErrorMessage","showError","showSuccessMessage","showSuccess","getEvent","subscribeEvents","replace","route","popTransactionStack","cancel","transactionStack","isTransactionShouldReplaceView","getInstance","instance","updateFeatures","newFeatures","updateOptions","newOptions","currentOptions","updatedOptions","setOptions","setConnectMethodsOrder","connectMethodsOrder","setWalletFeaturesOrder","walletFeaturesOrder","setCollapseWallets","collapseWallets","setSocialsOrder","socialsOrder","getConnectMethodsOrder","getConnectOrderMethod","removeAdapter","newCaipNetworks","removeAllEventListeners","Reflect","deleteProperty","addAdapter","extendedAdapterNetworks","addNetwork","removeNetwork","networkId","networkToRemove","remainingNetworks"],"sources":["../../../../src/client/appkit-base-client.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}