{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst fountainEncoder_1 = __importDefault(require(\"./fountainEncoder\"));\nconst bytewords_1 = __importDefault(require(\"./bytewords\"));\nclass UREncoder {\n  constructor(_ur, maxFragmentLength, firstSeqNum, minFragmentLength) {\n    this.ur = _ur;\n    this.fountainEncoder = new fountainEncoder_1.default(_ur.cbor, maxFragmentLength, firstSeqNum, minFragmentLength);\n  }\n  get fragmentsLength() {\n    return this.fountainEncoder.fragmentsLength;\n  }\n  get fragments() {\n    return this.fountainEncoder.fragments;\n  }\n  get messageLength() {\n    return this.fountainEncoder.messageLength;\n  }\n  get cbor() {\n    return this.ur.cbor;\n  }\n  encodeWhole() {\n    return [...new Array(this.fragmentsLength)].map(() => this.nextPart());\n  }\n  nextPart() {\n    const part = this.fountainEncoder.nextPart();\n    if (this.fountainEncoder.isSinglePart()) {\n      return UREncoder.encodeSinglePart(this.ur);\n    } else {\n      return UREncoder.encodePart(this.ur.type, part);\n    }\n  }\n  static encodeUri(scheme, pathComponents) {\n    const path = pathComponents.join('/');\n    return [scheme, path].join(':');\n  }\n  static encodeUR(pathComponents) {\n    return UREncoder.encodeUri('ur', pathComponents);\n  }\n  static encodePart(type, part) {\n    const seq = `${part.seqNum}-${part.seqLength}`;\n    const body = bytewords_1.default.encode(part.cbor().toString('hex'), bytewords_1.default.STYLES.MINIMAL);\n    return UREncoder.encodeUR([type, seq, body]);\n  }\n  static encodeSinglePart(ur) {\n    const body = bytewords_1.default.encode(ur.cbor.toString('hex'), bytewords_1.default.STYLES.MINIMAL);\n    return UREncoder.encodeUR([ur.type, body]);\n  }\n}\nexports.default = UREncoder;","map":{"version":3,"names":["fountainEncoder_1","__importDefault","require","bytewords_1","UREncoder","constructor","_ur","maxFragmentLength","firstSeqNum","minFragmentLength","ur","fountainEncoder","default","cbor","fragmentsLength","fragments","messageLength","encodeWhole","Array","map","nextPart","part","isSinglePart","encodeSinglePart","encodePart","type","encodeUri","scheme","pathComponents","path","join","encodeUR","seq","seqNum","seqLength","body","encode","toString","STYLES","MINIMAL","exports"],"sources":["C:\\Users\\yyash\\Coding\\solana-brkout\\frontend\\node_modules\\@ngraveio\\bc-ur\\src\\urEncoder.ts"],"sourcesContent":["import FountainEncoder, { FountainEncoderPart } from './fountainEncoder';\nimport bytewords from './bytewords';\nimport UR from './ur';\n\nexport default class UREncoder {\n  private ur: UR;\n  private fountainEncoder: FountainEncoder;\n\n  constructor(\n    _ur: UR,\n    maxFragmentLength?: number,\n    firstSeqNum?: number,\n    minFragmentLength?: number,\n  ) {\n    this.ur = _ur;\n    this.fountainEncoder = new FountainEncoder(_ur.cbor, maxFragmentLength, firstSeqNum, minFragmentLength);\n  }\n\n  public get fragmentsLength() { return this.fountainEncoder.fragmentsLength; }\n  public get fragments() { return this.fountainEncoder.fragments; }\n  public get messageLength() { return this.fountainEncoder.messageLength; }\n  public get cbor() { return this.ur.cbor; }\n\n  public encodeWhole(): string[] {\n    return [...new Array(this.fragmentsLength)].map(() => this.nextPart())\n  }\n\n  public nextPart(): string {\n    const part = this.fountainEncoder.nextPart();\n\n    if (this.fountainEncoder.isSinglePart()) {\n      return UREncoder.encodeSinglePart(this.ur);\n    }\n    else {\n      return UREncoder.encodePart(this.ur.type, part)\n    }\n  }\n\n  private static encodeUri(scheme: string, pathComponents: string[]): string {\n    const path = pathComponents.join('/');\n    return [scheme, path].join(':')\n  }\n\n  private static encodeUR(pathComponents: string[]): string {\n    return UREncoder.encodeUri('ur', pathComponents);\n  }\n\n  private static encodePart(type: string, part: FountainEncoderPart): string {\n    const seq = `${part.seqNum}-${part.seqLength}`;\n    const body = bytewords.encode(part.cbor().toString('hex'), bytewords.STYLES.MINIMAL);\n\n    return UREncoder.encodeUR([type, seq, body])\n  }\n\n  public static encodeSinglePart(ur: UR): string {\n    const body = bytewords.encode(ur.cbor.toString('hex'), bytewords.STYLES.MINIMAL);\n\n    return UREncoder.encodeUR([ur.type, body])\n  }\n}"],"mappings":";;;;;;;;;;AAAA,MAAAA,iBAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,WAAA,GAAAF,eAAA,CAAAC,OAAA;AAGA,MAAqBE,SAAS;EAI5BC,YACEC,GAAO,EACPC,iBAA0B,EAC1BC,WAAoB,EACpBC,iBAA0B;IAE1B,IAAI,CAACC,EAAE,GAAGJ,GAAG;IACb,IAAI,CAACK,eAAe,GAAG,IAAIX,iBAAA,CAAAY,OAAe,CAACN,GAAG,CAACO,IAAI,EAAEN,iBAAiB,EAAEC,WAAW,EAAEC,iBAAiB,CAAC;EACzG;EAEA,IAAWK,eAAeA,CAAA;IAAK,OAAO,IAAI,CAACH,eAAe,CAACG,eAAe;EAAE;EAC5E,IAAWC,SAASA,CAAA;IAAK,OAAO,IAAI,CAACJ,eAAe,CAACI,SAAS;EAAE;EAChE,IAAWC,aAAaA,CAAA;IAAK,OAAO,IAAI,CAACL,eAAe,CAACK,aAAa;EAAE;EACxE,IAAWH,IAAIA,CAAA;IAAK,OAAO,IAAI,CAACH,EAAE,CAACG,IAAI;EAAE;EAElCI,WAAWA,CAAA;IAChB,OAAO,CAAC,GAAG,IAAIC,KAAK,CAAC,IAAI,CAACJ,eAAe,CAAC,CAAC,CAACK,GAAG,CAAC,MAAM,IAAI,CAACC,QAAQ,EAAE,CAAC;EACxE;EAEOA,QAAQA,CAAA;IACb,MAAMC,IAAI,GAAG,IAAI,CAACV,eAAe,CAACS,QAAQ,EAAE;IAE5C,IAAI,IAAI,CAACT,eAAe,CAACW,YAAY,EAAE,EAAE;MACvC,OAAOlB,SAAS,CAACmB,gBAAgB,CAAC,IAAI,CAACb,EAAE,CAAC;KAC3C,MACI;MACH,OAAON,SAAS,CAACoB,UAAU,CAAC,IAAI,CAACd,EAAE,CAACe,IAAI,EAAEJ,IAAI,CAAC;;EAEnD;EAEQ,OAAOK,SAASA,CAACC,MAAc,EAAEC,cAAwB;IAC/D,MAAMC,IAAI,GAAGD,cAAc,CAACE,IAAI,CAAC,GAAG,CAAC;IACrC,OAAO,CAACH,MAAM,EAAEE,IAAI,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;EACjC;EAEQ,OAAOC,QAAQA,CAACH,cAAwB;IAC9C,OAAOxB,SAAS,CAACsB,SAAS,CAAC,IAAI,EAAEE,cAAc,CAAC;EAClD;EAEQ,OAAOJ,UAAUA,CAACC,IAAY,EAAEJ,IAAyB;IAC/D,MAAMW,GAAG,GAAG,GAAGX,IAAI,CAACY,MAAM,IAAIZ,IAAI,CAACa,SAAS,EAAE;IAC9C,MAAMC,IAAI,GAAGhC,WAAA,CAAAS,OAAS,CAACwB,MAAM,CAACf,IAAI,CAACR,IAAI,EAAE,CAACwB,QAAQ,CAAC,KAAK,CAAC,EAAElC,WAAA,CAAAS,OAAS,CAAC0B,MAAM,CAACC,OAAO,CAAC;IAEpF,OAAOnC,SAAS,CAAC2B,QAAQ,CAAC,CAACN,IAAI,EAAEO,GAAG,EAAEG,IAAI,CAAC,CAAC;EAC9C;EAEO,OAAOZ,gBAAgBA,CAACb,EAAM;IACnC,MAAMyB,IAAI,GAAGhC,WAAA,CAAAS,OAAS,CAACwB,MAAM,CAAC1B,EAAE,CAACG,IAAI,CAACwB,QAAQ,CAAC,KAAK,CAAC,EAAElC,WAAA,CAAAS,OAAS,CAAC0B,MAAM,CAACC,OAAO,CAAC;IAEhF,OAAOnC,SAAS,CAAC2B,QAAQ,CAAC,CAACrB,EAAE,CAACe,IAAI,EAAEU,IAAI,CAAC,CAAC;EAC5C;;AAtDFK,OAAA,CAAA5B,OAAA,GAAAR,SAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}