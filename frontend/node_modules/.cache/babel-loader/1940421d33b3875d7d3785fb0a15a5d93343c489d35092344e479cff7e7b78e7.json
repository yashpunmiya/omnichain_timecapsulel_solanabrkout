{"ast":null,"code":"import { proxy, subscribe as sub } from 'valtio/vanilla';\nimport { proxyMap, subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { ConstantsUtil as CommonConstantsUtil, NetworkUtil } from '@reown/appkit-common';\nimport { getChainsToDisconnect } from '../utils/ChainControllerUtil.js';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { AccountController } from './AccountController.js';\nimport { ConnectionController } from './ConnectionController.js';\nimport { ConnectorController } from './ConnectorController.js';\nimport { EventsController } from './EventsController.js';\nimport { ModalController } from './ModalController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { PublicStateController } from './PublicStateController.js';\nimport { RouterController } from './RouterController.js';\nimport { SendController } from './SendController.js';\n// -- Constants ----------------------------------------- //\nconst accountState = {\n  currentTab: 0,\n  tokenBalance: [],\n  smartAccountDeployed: false,\n  addressLabels: new Map(),\n  allAccounts: [],\n  user: undefined\n};\nconst networkState = {\n  caipNetwork: undefined,\n  supportsAllNetworks: true,\n  smartAccountEnabledNetworks: []\n};\n// -- State --------------------------------------------- //\nconst state = proxy({\n  chains: proxyMap(),\n  activeCaipAddress: undefined,\n  activeChain: undefined,\n  activeCaipNetwork: undefined,\n  noAdapters: false,\n  universalAdapter: {\n    networkControllerClient: undefined,\n    connectionControllerClient: undefined\n  },\n  isSwitchingNamespace: false\n});\n// -- Controller ---------------------------------------- //\nexport const ChainController = {\n  state,\n  subscribe(callback) {\n    return sub(state, () => {\n      callback(state);\n    });\n  },\n  subscribeKey(key, callback) {\n    return subKey(state, key, callback);\n  },\n  subscribeChainProp(property, callback, chain) {\n    let prev = undefined;\n    return sub(state.chains, () => {\n      const activeChain = chain || state.activeChain;\n      if (activeChain) {\n        const nextValue = state.chains.get(activeChain)?.[property];\n        if (prev !== nextValue) {\n          prev = nextValue;\n          callback(nextValue);\n        }\n      }\n    });\n  },\n  initialize(adapters, caipNetworks, clients) {\n    const {\n      chainId: activeChainId,\n      namespace: activeNamespace\n    } = StorageUtil.getActiveNetworkProps();\n    const activeCaipNetwork = caipNetworks?.find(network => network.id.toString() === activeChainId?.toString());\n    const defaultAdapter = adapters.find(adapter => adapter?.namespace === activeNamespace);\n    const adapterToActivate = defaultAdapter || adapters?.[0];\n    const namespaces = new Set([...(caipNetworks?.map(network => network.chainNamespace) ?? [])]);\n    if (adapters?.length === 0 || !adapterToActivate) {\n      state.noAdapters = true;\n    }\n    if (!state.noAdapters) {\n      state.activeChain = adapterToActivate?.namespace;\n      state.activeCaipNetwork = activeCaipNetwork;\n      this.setChainNetworkData(adapterToActivate?.namespace, {\n        caipNetwork: activeCaipNetwork\n      });\n      if (state.activeChain) {\n        PublicStateController.set({\n          activeChain: adapterToActivate?.namespace\n        });\n      }\n    }\n    namespaces.forEach(namespace => {\n      const namespaceNetworks = caipNetworks?.filter(network => network.chainNamespace === namespace);\n      ChainController.state.chains.set(namespace, {\n        namespace,\n        networkState: proxy({\n          ...networkState,\n          caipNetwork: namespaceNetworks?.[0]\n        }),\n        accountState: proxy(accountState),\n        caipNetworks: namespaceNetworks ?? [],\n        ...clients\n      });\n      this.setRequestedCaipNetworks(namespaceNetworks ?? [], namespace);\n    });\n  },\n  removeAdapter(namespace) {\n    if (state.activeChain === namespace) {\n      const nextAdapter = Array.from(state.chains.entries()).find(([chainNamespace]) => chainNamespace !== namespace);\n      if (nextAdapter) {\n        const caipNetwork = nextAdapter[1]?.caipNetworks?.[0];\n        if (caipNetwork) {\n          this.setActiveCaipNetwork(caipNetwork);\n        }\n      }\n    }\n    state.chains.delete(namespace);\n  },\n  addAdapter(adapter, {\n    networkControllerClient,\n    connectionControllerClient\n  }, caipNetworks) {\n    state.chains.set(adapter.namespace, {\n      namespace: adapter.namespace,\n      networkState: {\n        ...networkState,\n        caipNetwork: caipNetworks[0]\n      },\n      accountState,\n      caipNetworks,\n      connectionControllerClient,\n      networkControllerClient\n    });\n    this.setRequestedCaipNetworks(caipNetworks?.filter(caipNetwork => caipNetwork.chainNamespace === adapter.namespace) ?? [], adapter.namespace);\n  },\n  addNetwork(network) {\n    const chainAdapter = state.chains.get(network.chainNamespace);\n    if (chainAdapter) {\n      const newNetworks = [...(chainAdapter.caipNetworks || [])];\n      if (!chainAdapter.caipNetworks?.find(caipNetwork => caipNetwork.id === network.id)) {\n        newNetworks.push(network);\n      }\n      state.chains.set(network.chainNamespace, {\n        ...chainAdapter,\n        caipNetworks: newNetworks\n      });\n      this.setRequestedCaipNetworks(newNetworks, network.chainNamespace);\n    }\n  },\n  removeNetwork(namespace, networkId) {\n    const chainAdapter = state.chains.get(namespace);\n    if (chainAdapter) {\n      // Check if network being removed is active network\n      const isActiveNetwork = state.activeCaipNetwork?.id === networkId;\n      // Filter out the network being removed\n      const newCaipNetworksOfAdapter = [...(chainAdapter.caipNetworks?.filter(network => network.id !== networkId) || [])];\n      // If active network was removed and there are other networks available, switch to first one\n      if (isActiveNetwork && chainAdapter?.caipNetworks?.[0]) {\n        this.setActiveCaipNetwork(chainAdapter.caipNetworks[0]);\n      }\n      state.chains.set(namespace, {\n        ...chainAdapter,\n        caipNetworks: newCaipNetworksOfAdapter\n      });\n      this.setRequestedCaipNetworks(newCaipNetworksOfAdapter || [], namespace);\n    }\n  },\n  setAdapterNetworkState(chain, props) {\n    const chainAdapter = state.chains.get(chain);\n    if (chainAdapter) {\n      chainAdapter.networkState = {\n        ...(chainAdapter.networkState || networkState),\n        ...props\n      };\n      state.chains.set(chain, chainAdapter);\n    }\n  },\n  setChainAccountData(chain, accountProps, _unknown = true) {\n    if (!chain) {\n      throw new Error('Chain is required to update chain account data');\n    }\n    const chainAdapter = state.chains.get(chain);\n    if (chainAdapter) {\n      const newAccountState = {\n        ...(chainAdapter.accountState || accountState),\n        ...accountProps\n      };\n      state.chains.set(chain, {\n        ...chainAdapter,\n        accountState: newAccountState\n      });\n      if (state.chains.size === 1 || state.activeChain === chain) {\n        if (accountProps.caipAddress) {\n          state.activeCaipAddress = accountProps.caipAddress;\n        }\n        AccountController.replaceState(newAccountState);\n      }\n    }\n  },\n  setChainNetworkData(chain, networkProps) {\n    if (!chain) {\n      return;\n    }\n    const chainAdapter = state.chains.get(chain);\n    if (chainAdapter) {\n      const newNetworkState = {\n        ...(chainAdapter.networkState || networkState),\n        ...networkProps\n      };\n      state.chains.set(chain, {\n        ...chainAdapter,\n        networkState: newNetworkState\n      });\n    }\n  },\n  // eslint-disable-next-line max-params\n  setAccountProp(prop, value, chain, replaceState = true) {\n    this.setChainAccountData(chain, {\n      [prop]: value\n    }, replaceState);\n    if (prop === 'status' && value === 'disconnected' && chain) {\n      ConnectorController.removeConnectorId(chain);\n    }\n  },\n  setActiveNamespace(chain) {\n    state.activeChain = chain;\n    const newAdapter = chain ? state.chains.get(chain) : undefined;\n    const caipNetwork = newAdapter?.networkState?.caipNetwork;\n    if (caipNetwork?.id && chain) {\n      state.activeCaipAddress = newAdapter?.accountState?.caipAddress;\n      state.activeCaipNetwork = caipNetwork;\n      this.setChainNetworkData(chain, {\n        caipNetwork\n      });\n      StorageUtil.setActiveCaipNetworkId(caipNetwork?.caipNetworkId);\n      PublicStateController.set({\n        activeChain: chain,\n        selectedNetworkId: caipNetwork?.caipNetworkId\n      });\n    }\n  },\n  setActiveCaipNetwork(caipNetwork) {\n    if (!caipNetwork) {\n      return;\n    }\n    if (state.activeChain !== caipNetwork.chainNamespace) {\n      this.setIsSwitchingNamespace(true);\n    }\n    const newAdapter = state.chains.get(caipNetwork.chainNamespace);\n    state.activeChain = caipNetwork.chainNamespace;\n    state.activeCaipNetwork = caipNetwork;\n    this.setChainNetworkData(caipNetwork.chainNamespace, {\n      caipNetwork\n    });\n    if (newAdapter?.accountState?.address) {\n      state.activeCaipAddress = `${caipNetwork.chainNamespace}:${caipNetwork.id}:${newAdapter?.accountState?.address}`;\n    } else {\n      state.activeCaipAddress = undefined;\n    }\n    // Update the chain's account state with the new caip address value\n    this.setAccountProp('caipAddress', state.activeCaipAddress, caipNetwork.chainNamespace);\n    if (newAdapter) {\n      AccountController.replaceState(newAdapter.accountState);\n    }\n    // Reset send state when switching networks\n    SendController.resetSend();\n    PublicStateController.set({\n      activeChain: state.activeChain,\n      selectedNetworkId: state.activeCaipNetwork?.caipNetworkId\n    });\n    StorageUtil.setActiveCaipNetworkId(caipNetwork.caipNetworkId);\n    const isSupported = this.checkIfSupportedNetwork(caipNetwork.chainNamespace);\n    if (!isSupported && OptionsController.state.enableNetworkSwitch && !OptionsController.state.allowUnsupportedChain && !ConnectionController.state.wcBasic) {\n      this.showUnsupportedChainUI();\n    }\n  },\n  addCaipNetwork(caipNetwork) {\n    if (!caipNetwork) {\n      return;\n    }\n    const chain = state.chains.get(caipNetwork.chainNamespace);\n    if (chain) {\n      chain?.caipNetworks?.push(caipNetwork);\n    }\n  },\n  async switchActiveNamespace(namespace) {\n    if (!namespace) {\n      return;\n    }\n    const isDifferentChain = namespace !== ChainController.state.activeChain;\n    const caipNetworkOfNamespace = ChainController.getNetworkData(namespace)?.caipNetwork;\n    const firstNetworkWithChain = ChainController.getCaipNetworkByNamespace(namespace, caipNetworkOfNamespace?.id);\n    if (isDifferentChain && firstNetworkWithChain) {\n      await ChainController.switchActiveNetwork(firstNetworkWithChain);\n    }\n  },\n  async switchActiveNetwork(network) {\n    const activeAdapter = ChainController.state.chains.get(ChainController.state.activeChain);\n    const unsupportedNetwork = !activeAdapter?.caipNetworks?.some(caipNetwork => caipNetwork.id === state.activeCaipNetwork?.id);\n    if (unsupportedNetwork) {\n      RouterController.goBack();\n    }\n    const networkControllerClient = this.getNetworkControllerClient(network.chainNamespace);\n    if (networkControllerClient) {\n      await networkControllerClient.switchCaipNetwork(network);\n      EventsController.sendEvent({\n        type: 'track',\n        event: 'SWITCH_NETWORK',\n        properties: {\n          network: network.caipNetworkId\n        }\n      });\n    }\n  },\n  getNetworkControllerClient(chainNamespace) {\n    const chain = chainNamespace || state.activeChain;\n    const chainAdapter = state.chains.get(chain);\n    if (!chainAdapter) {\n      throw new Error('Chain adapter not found');\n    }\n    if (!chainAdapter.networkControllerClient) {\n      throw new Error('NetworkController client not set');\n    }\n    return chainAdapter.networkControllerClient;\n  },\n  getConnectionControllerClient(_chain) {\n    const chain = _chain || state.activeChain;\n    if (!chain) {\n      throw new Error('Chain is required to get connection controller client');\n    }\n    const chainAdapter = state.chains.get(chain);\n    if (!chainAdapter?.connectionControllerClient) {\n      throw new Error('ConnectionController client not set');\n    }\n    return chainAdapter.connectionControllerClient;\n  },\n  getAccountProp(key, _chain) {\n    let chain = state.activeChain;\n    if (_chain) {\n      chain = _chain;\n    }\n    if (!chain) {\n      return undefined;\n    }\n    const chainAccountState = state.chains.get(chain)?.accountState;\n    if (!chainAccountState) {\n      return undefined;\n    }\n    return chainAccountState[key];\n  },\n  getNetworkProp(key, namespace) {\n    const chainNetworkState = state.chains.get(namespace)?.networkState;\n    if (!chainNetworkState) {\n      return undefined;\n    }\n    return chainNetworkState[key];\n  },\n  getRequestedCaipNetworks(chainToFilter) {\n    const adapter = state.chains.get(chainToFilter);\n    const {\n      approvedCaipNetworkIds = [],\n      requestedCaipNetworks = []\n    } = adapter?.networkState || {};\n    const sortedNetworks = CoreHelperUtil.sortRequestedNetworks(approvedCaipNetworkIds, requestedCaipNetworks);\n    return sortedNetworks;\n  },\n  getAllRequestedCaipNetworks() {\n    const requestedCaipNetworks = [];\n    state.chains.forEach(chainAdapter => {\n      const caipNetworks = this.getRequestedCaipNetworks(chainAdapter.namespace);\n      requestedCaipNetworks.push(...caipNetworks);\n    });\n    return requestedCaipNetworks;\n  },\n  setRequestedCaipNetworks(requestedCaipNetworks, chain) {\n    this.setAdapterNetworkState(chain, {\n      requestedCaipNetworks\n    });\n  },\n  getAllApprovedCaipNetworkIds() {\n    const approvedCaipNetworkIds = [];\n    state.chains.forEach(chainAdapter => {\n      const approvedIds = this.getApprovedCaipNetworkIds(chainAdapter.namespace);\n      approvedCaipNetworkIds.push(...approvedIds);\n    });\n    return approvedCaipNetworkIds;\n  },\n  getActiveCaipNetwork() {\n    return state.activeCaipNetwork;\n  },\n  getActiveCaipAddress() {\n    return state.activeCaipAddress;\n  },\n  getApprovedCaipNetworkIds(namespace) {\n    const adapter = state.chains.get(namespace);\n    const approvedCaipNetworkIds = adapter?.networkState?.approvedCaipNetworkIds || [];\n    return approvedCaipNetworkIds;\n  },\n  async setApprovedCaipNetworksData(namespace) {\n    const networkControllerClient = this.getNetworkControllerClient();\n    const data = await networkControllerClient?.getApprovedCaipNetworksData();\n    this.setAdapterNetworkState(namespace, {\n      approvedCaipNetworkIds: data?.approvedCaipNetworkIds,\n      supportsAllNetworks: data?.supportsAllNetworks\n    });\n  },\n  checkIfSupportedNetwork(namespace, caipNetwork) {\n    const activeCaipNetwork = caipNetwork || state.activeCaipNetwork;\n    const requestedCaipNetworks = this.getRequestedCaipNetworks(namespace);\n    if (!requestedCaipNetworks.length) {\n      return true;\n    }\n    return requestedCaipNetworks?.some(network => network.id === activeCaipNetwork?.id);\n  },\n  checkIfSupportedChainId(chainId) {\n    if (!state.activeChain) {\n      return true;\n    }\n    const requestedCaipNetworks = this.getRequestedCaipNetworks(state.activeChain);\n    return requestedCaipNetworks?.some(network => network.id === chainId);\n  },\n  // Smart Account Network Handlers\n  setSmartAccountEnabledNetworks(smartAccountEnabledNetworks, chain) {\n    this.setAdapterNetworkState(chain, {\n      smartAccountEnabledNetworks\n    });\n  },\n  checkIfSmartAccountEnabled() {\n    const networkId = NetworkUtil.caipNetworkIdToNumber(state.activeCaipNetwork?.caipNetworkId);\n    const activeChain = state.activeChain;\n    if (!activeChain || !networkId) {\n      return false;\n    }\n    const smartAccountEnabledNetworks = this.getNetworkProp('smartAccountEnabledNetworks', activeChain);\n    return Boolean(smartAccountEnabledNetworks?.includes(Number(networkId)));\n  },\n  getActiveNetworkTokenAddress() {\n    const namespace = state.activeCaipNetwork?.chainNamespace || 'eip155';\n    const chainId = state.activeCaipNetwork?.id || 1;\n    const address = ConstantsUtil.NATIVE_TOKEN_ADDRESS[namespace];\n    return `${namespace}:${chainId}:${address}`;\n  },\n  showUnsupportedChainUI() {\n    ModalController.open({\n      view: 'UnsupportedChain'\n    });\n  },\n  checkIfNamesSupported() {\n    const activeCaipNetwork = state.activeCaipNetwork;\n    return Boolean(activeCaipNetwork?.chainNamespace && ConstantsUtil.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(activeCaipNetwork.chainNamespace));\n  },\n  resetNetwork(namespace) {\n    this.setAdapterNetworkState(namespace, {\n      approvedCaipNetworkIds: undefined,\n      supportsAllNetworks: true,\n      smartAccountEnabledNetworks: []\n    });\n  },\n  resetAccount(chain) {\n    const chainToWrite = chain;\n    if (!chainToWrite) {\n      throw new Error('Chain is required to set account prop');\n    }\n    state.activeCaipAddress = undefined;\n    this.setChainAccountData(chainToWrite, {\n      smartAccountDeployed: false,\n      currentTab: 0,\n      caipAddress: undefined,\n      address: undefined,\n      balance: undefined,\n      balanceSymbol: undefined,\n      profileName: undefined,\n      profileImage: undefined,\n      addressExplorerUrl: undefined,\n      tokenBalance: [],\n      connectedWalletInfo: undefined,\n      preferredAccountType: undefined,\n      socialProvider: undefined,\n      socialWindow: undefined,\n      farcasterUrl: undefined,\n      allAccounts: [],\n      user: undefined,\n      status: 'disconnected'\n    });\n    ConnectorController.removeConnectorId(chainToWrite);\n  },\n  async disconnect(namespace) {\n    const chainsToDisconnect = getChainsToDisconnect(namespace);\n    try {\n      // Reset send state when disconnecting\n      SendController.resetSend();\n      const disconnectResults = await Promise.allSettled(chainsToDisconnect.map(async ([ns, adapter]) => {\n        try {\n          const {\n            caipAddress\n          } = this.getAccountData(ns) || {};\n          if (caipAddress && adapter.connectionControllerClient?.disconnect) {\n            await adapter.connectionControllerClient.disconnect(ns);\n          }\n          this.resetAccount(ns);\n          this.resetNetwork(ns);\n        } catch (error) {\n          throw new Error(`Failed to disconnect chain ${ns}: ${error.message}`);\n        }\n      }));\n      ConnectionController.resetWcConnection();\n      const failures = disconnectResults.filter(result => result.status === 'rejected');\n      if (failures.length > 0) {\n        throw new Error(failures.map(f => f.reason.message).join(', '));\n      }\n      StorageUtil.deleteConnectedSocialProvider();\n      if (namespace) {\n        ConnectorController.removeConnectorId(namespace);\n      } else {\n        ConnectorController.resetConnectorIds();\n      }\n      EventsController.sendEvent({\n        type: 'track',\n        event: 'DISCONNECT_SUCCESS',\n        properties: {\n          namespace: namespace || 'all'\n        }\n      });\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error.message || 'Failed to disconnect chains');\n      EventsController.sendEvent({\n        type: 'track',\n        event: 'DISCONNECT_ERROR',\n        properties: {\n          message: error.message || 'Failed to disconnect chains'\n        }\n      });\n    }\n  },\n  setIsSwitchingNamespace(isSwitchingNamespace) {\n    state.isSwitchingNamespace = isSwitchingNamespace;\n  },\n  getFirstCaipNetworkSupportsAuthConnector() {\n    const availableChains = [];\n    let firstCaipNetwork = undefined;\n    state.chains.forEach(chain => {\n      if (CommonConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(ns => ns === chain.namespace)) {\n        if (chain.namespace) {\n          availableChains.push(chain.namespace);\n        }\n      }\n    });\n    if (availableChains.length > 0) {\n      const firstAvailableChain = availableChains[0];\n      firstCaipNetwork = firstAvailableChain ? state.chains.get(firstAvailableChain)?.caipNetworks?.[0] : undefined;\n      return firstCaipNetwork;\n    }\n    return undefined;\n  },\n  getAccountData(chainNamespace) {\n    if (!chainNamespace) {\n      return AccountController.state;\n    }\n    return ChainController.state.chains.get(chainNamespace)?.accountState;\n  },\n  getNetworkData(chainNamespace) {\n    const namespace = chainNamespace || state.activeChain;\n    if (!namespace) {\n      return undefined;\n    }\n    return ChainController.state.chains.get(namespace)?.networkState;\n  },\n  getCaipNetworkByNamespace(chainNamespace, chainId) {\n    if (!chainNamespace) {\n      return undefined;\n    }\n    const chain = ChainController.state.chains.get(chainNamespace);\n    const byChainId = chain?.caipNetworks?.find(network => network.id === chainId);\n    if (byChainId) {\n      return byChainId;\n    }\n    return chain?.networkState?.caipNetwork || chain?.caipNetworks?.[0];\n  },\n  /**\n   * Get the requested CaipNetwork IDs for a given namespace. If namespace is not provided, all requested CaipNetwork IDs will be returned\n   * @param namespace - The namespace to get the requested CaipNetwork IDs for\n   * @returns The requested CaipNetwork IDs\n   */\n  getRequestedCaipNetworkIds() {\n    const namespace = ConnectorController.state.filterByNamespace;\n    const chains = namespace ? [state.chains.get(namespace)] : Array.from(state.chains.values());\n    return chains.flatMap(chain => chain?.caipNetworks || []).map(caipNetwork => caipNetwork.caipNetworkId);\n  }\n};","map":{"version":3,"names":["proxy","subscribe","sub","proxyMap","subscribeKey","subKey","ConstantsUtil","CommonConstantsUtil","NetworkUtil","getChainsToDisconnect","CoreHelperUtil","StorageUtil","AccountController","ConnectionController","ConnectorController","EventsController","ModalController","OptionsController","PublicStateController","RouterController","SendController","accountState","currentTab","tokenBalance","smartAccountDeployed","addressLabels","Map","allAccounts","user","undefined","networkState","caipNetwork","supportsAllNetworks","smartAccountEnabledNetworks","state","chains","activeCaipAddress","activeChain","activeCaipNetwork","noAdapters","universalAdapter","networkControllerClient","connectionControllerClient","isSwitchingNamespace","ChainController","callback","key","subscribeChainProp","property","chain","prev","nextValue","get","initialize","adapters","caipNetworks","clients","chainId","activeChainId","namespace","activeNamespace","getActiveNetworkProps","find","network","id","toString","defaultAdapter","adapter","adapterToActivate","namespaces","Set","map","chainNamespace","length","setChainNetworkData","set","forEach","namespaceNetworks","filter","setRequestedCaipNetworks","removeAdapter","nextAdapter","Array","from","entries","setActiveCaipNetwork","delete","addAdapter","addNetwork","chainAdapter","newNetworks","push","removeNetwork","networkId","isActiveNetwork","newCaipNetworksOfAdapter","setAdapterNetworkState","props","setChainAccountData","accountProps","_unknown","Error","newAccountState","size","caipAddress","replaceState","networkProps","newNetworkState","setAccountProp","prop","value","removeConnectorId","setActiveNamespace","newAdapter","setActiveCaipNetworkId","caipNetworkId","selectedNetworkId","setIsSwitchingNamespace","address","resetSend","isSupported","checkIfSupportedNetwork","enableNetworkSwitch","allowUnsupportedChain","wcBasic","showUnsupportedChainUI","addCaipNetwork","switchActiveNamespace","isDifferentChain","caipNetworkOfNamespace","getNetworkData","firstNetworkWithChain","getCaipNetworkByNamespace","switchActiveNetwork","activeAdapter","unsupportedNetwork","some","goBack","getNetworkControllerClient","switchCaipNetwork","sendEvent","type","event","properties","getConnectionControllerClient","_chain","getAccountProp","chainAccountState","getNetworkProp","chainNetworkState","getRequestedCaipNetworks","chainToFilter","approvedCaipNetworkIds","requestedCaipNetworks","sortedNetworks","sortRequestedNetworks","getAllRequestedCaipNetworks","getAllApprovedCaipNetworkIds","approvedIds","getApprovedCaipNetworkIds","getActiveCaipNetwork","getActiveCaipAddress","setApprovedCaipNetworksData","data","getApprovedCaipNetworksData","checkIfSupportedChainId","setSmartAccountEnabledNetworks","checkIfSmartAccountEnabled","caipNetworkIdToNumber","Boolean","includes","Number","getActiveNetworkTokenAddress","NATIVE_TOKEN_ADDRESS","open","view","checkIfNamesSupported","NAMES_SUPPORTED_CHAIN_NAMESPACES","resetNetwork","resetAccount","chainToWrite","balance","balanceSymbol","profileName","profileImage","addressExplorerUrl","connectedWalletInfo","preferredAccountType","socialProvider","socialWindow","farcasterUrl","status","disconnect","chainsToDisconnect","disconnectResults","Promise","allSettled","ns","getAccountData","error","message","resetWcConnection","failures","result","f","reason","join","deleteConnectedSocialProvider","resetConnectorIds","console","getFirstCaipNetworkSupportsAuthConnector","availableChains","firstCaipNetwork","AUTH_CONNECTOR_SUPPORTED_CHAINS","firstAvailableChain","byChainId","getRequestedCaipNetworkIds","filterByNamespace","values","flatMap"],"sources":["../../../../src/controllers/ChainController.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}